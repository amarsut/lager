<!DOCTYPE html>
<html lang="sv" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jobbplanerare v15 - Kalender</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

	<link rel="manifest" href="manifest.json">
    <link rel="stylesheet" href="style.css">

    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
    
    <script src='https://cdn.jsdelivr.net/npm/fullcalendar@6.1.11/index.global.min.js'></script>

    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>

</head>
<body>

    <svg width="0" height="0" style="position:absolute;display:none;">
        <symbol id="icon-user" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A1.875 1.875 0 0117.624 22H6.376a1.875 1.875 0 01-1.875-1.882z" /></symbol>
        
        <symbol id="icon-logo-p" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M11.35 3.836c-1.061 1.061-1.66 2.503-1.66 4.025 0 3.223 2.612 5.836 5.836 5.836 1.522 0 2.964-.598 4.025-1.66m-8.05 3.32a6.963 6.963 0 00-4.025 1.66C6.446 18.06 5.845 19.502 5.845 21H3.75c0-3.223 2.612-5.836 5.836-5.836 1.522 0 2.964.598 4.025 1.66m8.05-3.32a6.963 6.963 0 00-4.025-1.66c-1.061-1.061-2.503-1.66-4.025-1.66-3.223 0-5.836 2.612-5.836 5.836 0 1.522.598 2.964 1.66 4.025m3.32-8.05a6.963 6.963 0 001.66-4.025C13.664 6.446 15.106 5.845 16.628 5.845c3.223 0 5.836 2.612 5.836 5.836 0 1.522-.598 2.964-1.66 4.025" /></symbol>
        <symbol id="icon-plus" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" /></symbol>
        <symbol id="icon-trash" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12.578 0a48.108 48.108 0 01-3.478-.397m15.42 0A48.1 48.1 0 0012 5.11M4.772 5.79L4.772 4.102a2.25 2.25 0 012.25-2.25h1.5a2.25 2.25 0 012.25 2.25v1.688M4.772 5.79l-.175 2.457a1.125 1.125 0 001.12 1.228H18.28a1.125 1.125 0 001.12-1.228l-.175-2.457m0 0l-1.096-1.547a.562.562 0 00-.923 0l-1.096 1.547M19.228 5.79l-1.096-1.547a.562.562 0 01-.923 0l-1.096 1.547" /></symbol>
        <symbol id="icon-empty" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M20.25 7.5l-.625 10.632a2.25 2.25 0 01-2.247 2.118H6.622a2.25 2.25 0 01-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125z" /></symbol>
        <symbol id="icon-search" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z" /></symbol>
        <symbol id="icon-sun" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 3v2.25m6.364.386l-1.591 1.591M21 12h-2.25m-.386 6.364l-1.591-1.591M12 18.75V21m-6.364-.386l1.591-1.591M3 12H.75m.386-6.364l1.591 1.591M12 12a4.5 4.5 0 100-9 4.5 4.5 0 000 9z" /></symbol>
        <symbol id="icon-moon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M21.752 15.002A9.718 9.718 0 0118 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 003 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 009.002-5.998z" /></symbol>
        <symbol id="icon-close" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" /></symbol>
        <symbol id="icon-chat" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M2.25 12.76c0 1.6 1.123 2.994 2.707 3.227 1.068.157 2.148.279 3.238.364.466.037.893.281 1.153.671L12 21l3.66-3.938c.26-.29.687-.534 1.153-.67 1.09-.086 2.17-.208 3.238-.365 1.584-.233 2.707-1.626 2.707-3.228V6.741c0-1.602-1.123-2.995-2.707-3.228A48.344 48.344 0 0012 3c-2.392 0-4.744.175-7.043.513C3.373 3.746 2.25 5.14 2.25 6.74v6.02z" /></symbol>
        <symbol id="icon-calendar-day" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M6.75 3v2.25M17.25 3v2.25M3.75 8.25h16.5M4.5 1.5h15A2.25 2.25 0 0121.75 3.75v16.5A2.25 2.25 0 0119.5 22.5h-15A2.25 2.25 0 012.25 20.25V3.75A2.25 2.25 0 014.5 1.5zM12 12.75h.007v.008H12v-.008z" /></symbol>
        <symbol id="icon-clock" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z" /></symbol>
        <symbol id="icon-duplicate" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75c-.621 0-1.125-.504-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 011.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 00-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375V17.25" /></symbol>
        <symbol id="icon-upload" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5" /></symbol>
        <symbol id="icon-download" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3" /></symbol>
        <symbol id="icon-briefcase" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M20.25 14.15v4.05a2.25 2.25 0 01-2.25 2.25H5.002a2.25 2.25 0 01-2.25-2.25v-4.05m17.25-8.25v8.25m0 0H4.75m15.5 0v-8.25a2.25 2.25 0 00-2.25-2.25H6.75a2.25 2.25 0 00-2.25 2.25v8.25" /></symbol>
        <symbol id="icon-file-text" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75v-2.625a3.375 3.375 0 013.375-3.375h1.5A1.125 1.125 0 0013.5 7.125v-1.5a3.375 3.375 0 013.375-3.375H15.75m-7.5 12.75h-1.5a3.375 3.375 0 01-3.375-3.375V8.625a3.375 3.375 0 013.375-3.375h1.5A3.375 3.375 0 0113.5 8.625v2.625a3.375 3.375 0 01-3.375 3.375M15 12h-1.5" /></symbol>
        <symbol id="icon-check" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></symbol>
        <symbol id="icon-flag" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M3 3v1.5M3 21v-6m0 0l2.77-.693a9 9 0 016.208.682l.108.054a9 9 0 006.086.71l3.114-.732a48.524 48.524 0 01-.005-10.499l-3.11.732a9 9 0 01-6.085-.711l-.108-.054a9 9 0 00-6.208-.682L3 4.5M3 15V4.5" /></symbol>
        <symbol id="icon-phone" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 002.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-2.827-1.45-5.154-3.777-6.604-6.604l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 00-1.091-.852H4.5A2.25 2.25 0 002.25 4.5v2.25z" /></symbol>
        <symbol id="icon-car" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M8.25 18.75a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m3 0h6m-9 0H3.375a1.125 1.125 0 01-1.125-1.125V14.25m17.25 4.5a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m3 0h1.125c.621 0 1.125-.504 1.125-1.125V14.25m-17.25 4.5l1.17-3.873a1.125 1.125 0 011.086-.928h10.088c.563 0 1.042.404 1.086.928l1.17 3.873m0 0H6.125M6.125 18.75L4.875 15m14.25 0l-1.25-3.75m-13.5 3.75V15m14.25 0V15M6.125 15H17.875m0 0V9a2.25 2.25 0 00-2.25-2.25H8.25A2.25 2.25 0 006 9v6z" /></symbol>
        <symbol id="icon-pencil" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L6.832 19.82a4.5 4.5 0 01-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 011.13-1.897L16.863 4.487zm0 0L19.5 7.125" /></symbol>
        <symbol id="icon-list" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" /></symbol>
        <symbol id="icon-lock-closed" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z" /></symbol>
        <symbol id="icon-view-dense" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M3 6h18M3 10h18M3 14h18M3 18h18" /></symbol>
        
        <symbol id="icon-calendar-view" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M6.75 3v2.25M17.25 3v2.25M3.75 8.25h16.5M3.75 12h16.5M3.75 15.75h16.5M4.5 1.5h15A2.25 2.25 0 0121.75 3.75v16.5A2.25 2.25 0 0119.5 22.5h-15A2.25 2.25 0 012.25 20.25V3.75A2.25 2.25 0 014.5 1.5z" /></symbol>
        <symbol id="icon-timeline-view" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5M3.75 17.25h16.5" /></symbol>

        <symbol id="icon-settings" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.324.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.242 1.417l-1.07 1.07a.999.999 0 000 1.414l1.07 1.07c.418.418.418 1.099 0 1.517l-1.296 2.247a1.125 1.125 0 01-1.37.49l-1.217-.456a1.125 1.125 0 00-1.075.124c-.073.044-.146.087-.22.127a1.125 1.125 0 00-.645.87l-.213 1.281c-.09.542-.56.94-1.11.94h-2.593c-.55 0-1.02-.398-1.11-.94l-.213-1.281a1.125 1.125 0 00-.645-.87c-.074-.04-.147-.083-.22-.127a1.125 1.125 0 00-1.075-.124l-1.217.456a1.125 1.125 0 01-1.37-.49l-1.296-2.247a1.125 1.125 0 01.242-1.417l1.07-1.07a.999.999 0 000-1.414l-1.07-1.07a1.125 1.125 0 010-1.517l1.296-2.247a1.125 1.125 0 011.37.49l1.217.456a1.125 1.125 0 001.075-.124c.073-.044.146-.087.22-.127.332-.183.582-.496.645-.87l.213-1.281z" /><path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" /></symbol>
        <symbol id="icon-external-link" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M13.5 6H5.25A2.25 2.25 0 003 8.25v10.5A2.25 2.25 0 005.25 21h10.5A2.25 2.25 0 0018 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25" /></symbol>
        <symbol id="icon-oil" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M15.25 8.25h-.01M12.75 8.25h.01M10.25 8.25h.01M7.75 8.25h.01M7.75 10.75h.01M10.25 10.75h.01M12.75 10.75h.01M15.25 10.75h.01M7.75 13.25h.01M10.25 13.25h.01M12.75 13.25h.01M15.25 13.25h.01M4.871 1.754l1.106-1.04a1.125 1.125 0 011.532 0l1.106 1.04m-3.744 0a48.611 48.611 0 003.744 0M4.871 1.754A48.611 48.611 0 018.615 1.754m-3.744 0l.006.006m3.732 0l.006.006m.006.006l.006-.006m-3.744 0l.006.006M15.75 5.25h1.5a1.5 1.5 0 011.5 1.5v8.25a1.5 1.5 0 01-1.5 1.5h-1.5m0-11.25S13.5 5.25 12 5.25s-3.75 0-3.75 0m0 11.25h-1.5a1.5 1.5 0 01-1.5-1.5V6.75a1.5 1.5 0 011.5-1.5h1.5m0 11.25S10.5 16.5 12 16.5s3.75 0 3.75 0" /></symbol>
        <symbol id="icon-tire" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /><path stroke-linecap="round" stroke-linejoin="round" d="M15.91 15.91a4.5 4.5 0 01-6.364 0 4.5 4.5 0 010-6.364 4.5 4.5 0 016.364 0zm-1.06-1.06a3 3 0 00-4.242 0 3 3 0 000 4.242 3 3 0 004.242 0 3 3 0 000-4.242z" /></symbol>
        <symbol id="icon-clipboard" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2" /></symbol>
        <symbol id="icon-wallet" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M21 12a2.25 2.25 0 00-2.25-2.25H5.25A2.25 2.25 0 003 12m18 0v6a2.25 2.25 0 01-2.25 2.25H5.25A2.25 2.25 0 013 18v-6m18 0V9A2.25 2.25 0 0018.75 6.75H5.25A2.25 2.25 0 003 9v3m18 0a2.25 2.25 0 00-2.25-2.25H5.25A2.25 2.25 0 003 12m15.375-3.862A2.25 2.25 0 0118.75 6.75H5.25A2.25 2.25 0 013 9v3m15.375-3.862A2.25 2.25 0 0018.75 9H5.25A2.25 2.25 0 003 12m18 0v6a2.25 2.25 0 01-2.25 2.25H5.25A2.25 2.25 0 013 18v-6" /></symbol>

		<symbol id="icon-oil-can" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
             <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 1.5A.75.75 0 0 0 1.5 2.25v10.5a.75.75 0 0 0 .75.75h1.5v3a.75.75 0 0 0 .75.75h9a.75.75 0 0 0 .75-.75v-3h1.5a.75.75 0 0 0 .75-.75V2.25a.75.75 0 0 0-.75-.75H2.25Zm13.5 1.5V5.25h-3V3h3Zm-5.25 0v2.25h-3V3h3ZM3 3h3v2.25H3V3Zm10.5 4.5V9.75h-3V7.5h3Zm-5.25 0v2.25h-3V7.5h3ZM3 7.5h3v2.25H3V7.5Z" />
             <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 1.5a.75.75 0 0 1 .75.75v3a.75.75 0 0 1-.75.75H9.31l-1.42 3.899a.75.75 0 0 0 .69 1.051h9.44a.75.75 0 0 1 .75.75v1.5a.75.75 0 0 1-.75.75h-9.44a2.25 2.25 0 0 1-2.071-3.153L9.31 5.25h6.44Z" />
        </symbol>
        <symbol id="icon-tire-wheel" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" d="M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" />
            <path stroke-linecap="round" stroke-linejoin="round" d="M15.91 15.91a4.5 4.5 0 0 1-6.364 0 4.5 4.5 0 0 1 0-6.364 4.5 4.5 0 0 1 6.364 0zm-1.06-1.06a3 3 0 0 0-4.242 0 3 3 0 0 0 0 4.242 3 3 0 0 0 4.242 0 3 3 0 0 0 0-4.242zM12 1.5v3M12 19.5v3M1.5 12h3M19.5 12h3M4.22 4.22l2.12 2.12M17.66 17.66l2.12 2.12M4.22 19.78l2.12-2.12M17.66 6.34l2.12-2.12" />
        </symbol>
    </svg>

    <div class="app-container">
        
        <header class="main-header">
            <div class="header-left">
                <a href="#" class="nav-logo" title="Statistiköversikt">
			    <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
			        <path d="M8 7H5a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3"/>
			        <path d="M16 2v6h-4V2h4zM12 11h.01"/>
			        <path d="M12 15h.01"/>
			        <path d="M12 19h.01"/>
			    </svg>
				</a>
                <div class="header-titles">
                    <span class="app-brand-title" id="appBrandTitle"></span>
                    <div class="view-toggle-buttons" id="viewToggleButtons">
                        <button class="button-toggle-view active" id="btnToggleTimeline" data-view="timeline">
                            <svg class="icon-sm" viewBox="0 0 24 24"><use href="#icon-timeline-view"></use></svg>
                            <span>Tidslinje</span>
                        </button>
                        <button class="button-toggle-view" id="btnToggleCalendar" data-view="calendar">
                            <svg class="icon-sm" viewBox="0 0 24 24"><use href="#icon-calendar-view"></use></svg>
                            <span>Kalender</span>
                        </button>
                    </div>
                </div>
            </div>
            
            <div class="header-right">
                <div class="divider"></div>

                <button class="nav-button" id="settingsBtn" title="Inställningar">
                    <svg class="icon" viewBox="0 0 24 24"><use href="#icon-settings"></use></svg>
                </button>
                
                <button class="nav-button" id="toggleCompactView" title="Kompakt vy">
                    <svg class="icon" viewBox="0 0 24 24"><use href="#icon-view-dense"></use></svg>
                </button>
                <button class="nav-button" id="lockAppBtn" title="Lås appen">
                    <svg class="icon" viewBox="0 0 24 24"><use href="#icon-lock-closed"></use></svg>
                </button>
                <button class="nav-button" id="themeToggle" title="Växla tema">
                    <svg class="icon icon-sun" viewBox="0 0 24 24"><use href="#icon-sun"></use></svg>
                    <svg class="icon icon-moon" viewBox="0 0 24 24"><use href="#icon-moon"></use></svg>
                </button>
                
                <button class="button clear-filter" id="clearDayFilterBtn" style="display: none;">
                    &times; Rensa sökning
                </button>
            </div>
        </header>

        <main class="app-main">
            <div class="main-content">
                
                <div class="stat-bar" id="statBar">
                    <div class="stat-card clickable" id="stat-card-kommande" data-filter="kommande">
                        <h3 class="stat-card-title"><svg class="icon-sm" viewBox="0 0 24 24"><use href="#icon-briefcase"></use></svg><span>Kommande</span></h3>
                        <p class="stat-card-value" id="stat-upcoming">0</p>
                    </div>
                    <div class="stat-card success clickable" id="stat-card-klar" data-filter="klar">
                        <h3 class="stat-card-title"><svg class="icon-sm" viewBox="0 0 24 24"><use href="#icon-check"></use></svg><span>Färdiga jobb</span></h3>
                        <p class="stat-card-value" id="stat-finished">0</p>
                    </div>
                    <div class="stat-card info clickable" id="stat-card-offererad" data-filter="offererad">
                        <h3 class="stat-card-title"><svg class="icon-sm" viewBox="0 0 24 24"><use href="#icon-file-text"></use></svg><span>Offererade</span></h3>
                        <p class="stat-card-value" id="stat-offered">0</p>
                    </div>
                    <div class="stat-card default clickable" id="stat-card-alla" data-filter="alla">
                        <h3 class="stat-card-title"><svg class="icon-sm" viewBox="0 0 24 24"><use href="#icon-list"></use></svg><span>Alla jobb</span></h3>
                        <p class="stat-card-value" id="stat-all">0</p>
                    </div>
                </div>
                
                <div id="timelineView">
                    <div class="view-controls" id="view-controls">
                        <div class="search-wrapper">
                            <svg class="icon icon-search" viewBox="0 0 24 24"><use href="#icon-search"></use></svg>
                            
                            <div class="search-spinner"></div> 
                            
                            <input type="search" id="searchBar" placeholder="Sök jobb... (F)">
                            <span class="search-result-count" id="desktopSearchResultCount"></span>
                            <button type="button" class="search-clear-btn" id="desktopSearchClear" title="Rensa sökning"></button>
                        </div>
                    </div>

                    <div class="table-container" id="jobListContainer">
                        </div>
                    <div class="empty-state" id="emptyStateTimeline">
                        <svg class="icon-lg" viewBox="0 0 24 24"><use href="#icon-empty"></use></svg>
                        <h3 id="emptyStateTitleTimeline">Laddar jobb från molnet...</h3>
                        <p id="emptyStateTextTimeline">Om detta tar tid, se till att du klistrat in din Firebase Config.</p>
                        <button class="button primary" id="emptyStateAddBtn">
                            <svg class="icon-sm" viewBox="0 0 24 24"><use href="#icon-plus"></use></svg>
                            <span>Lägg till nytt jobb</span>
                        </button>
                    </div>
                </div>

                <div id="calendarView" style="display: none;">
                    <div id="calendarContainer"></div>
                </div>

            </div>
        </main>
    </div>

    <nav class="mobile-nav" id="mobileNav">
        <button class="mobile-nav-btn active" data-view="timeline">
            <svg class="icon" viewBox="0 0 24 24"><use href="#icon-timeline-view"></use></svg>
            <span>Tidslinje</span>
        </button>
        <button class="mobile-nav-btn" data-view="calendar">
            <svg class="icon" viewBox="0 0 24 24"><use href="#icon-calendar-view"></use></svg>
            <span>Kalender</span>
        </button>
        <button class="mobile-nav-btn" id="mobileAddJobBtn" data-modal="jobModal">
            <svg class="icon" viewBox="0 0 24 24"><use href="#icon-plus"></use></svg>
            <span>Nytt Jobb</span>
        </button>
        <button class="mobile-nav-btn" id="mobileSearchBtn" data-modal="mobileSearchModal">
            <svg class="icon" viewBox="0 0 24 24"><use href="#icon-search"></use></svg>
            <span>Sök</span>
        </button>
        <button class="mobile-nav-btn" id="mobileSettingsBtn" data-modal="settingsModal">
            <svg class="icon" viewBox="0 0 24 24"><use href="#icon-settings"></use></svg>
            <span>Mer</span>
        </button>
    </nav>
    
    <div id="mobileSearchModal" class="modal-backdrop-mobile" data-modal-id="mobileSearchModal">
        <div class="search-modal-content">
            <form id="mobileSearchForm" style="display: contents;">
                <div class="search-wrapper">
                    <svg class="icon" viewBox="0 0 24 24"><use href="#icon-search"></use></svg>
                    <input type="search" id="mobileSearchBar" placeholder="Sök jobb...">
                    
                    <button type="button" class="search-clear-btn" id="mobileSearchClear" title="Rensa sökning"></button>
                </div>
            </form>
            <button id="mobileSearchCloseBtn" class="button secondary">Avbryt</button>
        </div>
    </div>


    <button id="fabAddJob" title="Lägg till nytt jobb (N)">
        <svg class="icon" viewBox="0 0 24 24"><use href="#icon-plus"></use></svg>
    </button>

    <div id="jobModal" class="modal-backdrop" data-modal-id="jobModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle">Lägg till nytt jobb</h2>
                
                <button class="modal-close-btn" id="modalCloseBtn" aria-label="Stäng modal">
                    <svg class="icon" viewBox="0 0 24 24"><use href="#icon-close"></use></svg>
                </button>
            </div>
            
            <form id="jobModalForm" class="modal-body">
                <input type="hidden" id="jobId">

                <div class="job-templates" id="jobTemplates">
                    <button type="button" class="button template-btn" data-template="oljebyte">
                        <svg class="icon-sm template-icon" viewBox="0 0 24 24"><use href="#icon-oil-can"></use></svg>
                        <span>Oljebyte</span>
                    </button>
                    <button type="button" class="button template-btn" data-template="hjulskifte">
                        <svg class="icon-sm template-icon" viewBox="0 0 24 24"><use href="#icon-tire-wheel"></use></svg>
                        <span>Hjulskifte</span>
                    </button>
                    
                    <label class="prio-toggle-wrapper" for="prio" id="prioToggleWrapper">
                        <input type="checkbox" id="prio">
                        <svg class="icon-sm" viewBox="0 0 24 24"><use href="#icon-flag"></use></svg>
                        <span>Prioritet</span>
                    </label>
                </div>
                
                <div class="form-group full-width">
                    <label for="status">Status</label>
                    <div class="quick-status-buttons" id="quickStatusButtons">
                        <button type="button" class="button" data-status="offererad">Offererad</button>
                        <button type="button" class="button" data-status="bokad">Bokad</button>
                        <button type="button" class="button" data-status="klar">Klar</button>
                        <button type="button" class="button" data-status="avbokad">Avbokad</button>
                    </div>
                    <select id="status" required class="visually-hidden">
                        <option value="offererad">Offererad</option>
                        <option value="bokad" selected>Bokad</option>
                        <option value="klar">Klar</option>
                        <option value="avbokad">Avbokad</option>
                    </select>
                </div>

                <div class="form-group full-width form-group-copyable">
                    <label for="kundnamn">Kundens Namn</label>
                    <input type="text" id="kundnamn" placeholder="Eva Svensson" required autocomplete="off">
                    <button type="button" class="copy-btn" id="copyKundnamn" title="Kopiera Kundnamn">
                        <svg class="icon-sm" viewBox="0 0 24 24"><use href="#icon-clipboard"></use></svg>
                    </button>
                    <div id="kundnamnSuggestions" class="suggestions-list"></div>
                </div>

                <div class="form-group full-width has-actions"> <label for="telefon">Telefonnummer</label>
                    <input type="tel" id="telefon" placeholder="070-123 45 67" autocomplete="off">
                    
                    <div class="input-field-actions">
                        <a href="#" id="jobModalCallBtn" class="icon-btn" title="Ring kund">
                            <svg class="icon-sm" viewBox="0 0 24 24"><use href="#icon-phone"></use></svg>
                        </a>
                        <a href="#" id="jobModalSmsBtn" class="icon-btn" title="Skicka SMS">
                            <svg class="icon-sm" viewBox="0 0 24 24"><use href="#icon-chat"></use></svg>
                        </a>
                    </div>
                </div>
                
                <div class="form-group-split">
                    <div class="form-group form-group-copyable">
                        <label for="regnr">Registreringsnummer</label>
                        <input type="text" id="regnr" placeholder="ABC 123">
                        <button type="button" class="copy-btn" id="copyRegnr" title="Kopiera Reg.nr">
                            <svg class="icon-sm" viewBox="0 0 24 24"><use href="#icon-clipboard"></use></svg>
                        </button>
                    </div>
                    <div class="form-group">
                        <label for="matarstallning">Mätarställning (km)</label>
                        <input type="text" inputmode="numeric" id="matarstallning" placeholder="t.ex. 123456" class="input-reminder" onfocus="this.select()">
                    </div>
                </div>
                
                <div class="form-group full-width">
                    <label for="kundpris">Kundpris (kr)</label>
                    <input type="number" id="kundpris" value="0" min="0" required onfocus="this.select()">
                </div>

                <div class="form-group full-width" id="expense-tracker">
                    <label>Specificerade Utgifter</label>
                    
                    <div class="expense-add-form">
                        <input type="text" id="expenseName" placeholder="Utgiftens namn (t.ex. Oljefilter)">
                        <input type="number" id="expenseCost" placeholder="Kostnad (kr)">
                        <button type="button" class="button secondary" id="addExpenseBtn">
                            <svg class="icon-sm" viewBox="0 0 24 24"><use href="#icon-plus"></use></svg>
                            <span>Lägg till</span>
                        </button>
                    </div>
                    
                    <div id="expenseList" class="expense-list">
                        </div>
                </div>
                <div class="form-group-profit">
                    <span id="vinstKalkyl">Vinst: 0 kr</span>
                </div>
                
                <div class="form-group-split">
                    <div class="form-group">
                        <label for="datum">Datum</label>
                        <div class="input-wrapper">
                            <input type="date" id="datum" required>
                            <svg class="icon-sm input-icon" viewBox="0 0 24 24"><use href="#icon-calendar-day"></use></svg>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="tid">Tid</label>
                        <div class="input-wrapper">
                            <input type="time" id="tid" required>
                            <svg class="icon-sm input-icon" viewBox="0 0 24 24"><use href="#icon-clock"></use></svg>
                        </div>
                        
                        <div class="quick-time-buttons" id="quickTimeButtons">
                            <button type="button" data-time="09:00">09:00</button>
                            <button type="button" data-time="10:00">10:00</button>
                            <button type="button" data-time="12:00">12:00</button>
                            <button type="button" data-time="14:00">14:00</button>
                            <button type="button" data-time="16:30">16:30</button>
                            <button type="button" data-time="18:00">18:00</button>
                        </div>
                    </div>
                </div>

                <div class="form-group full-width">
                    <label for="kommentarer">Offerter / Övriga kommentarer</label>
                    <textarea id="kommentarer" rows="4"></textarea>
                </div>
                
            </form>
			
            <div class="modal-actions">
                <button type="button" class="button secondary" id="modalCancelBtn">Avbryt</button>
                <button type="submit" class="button primary" id="modalSaveBtn" form="jobModalForm">Spara</button>
            </div>
        </div>
    </div>
    
    <div id="customerModal" class="modal-backdrop" data-modal-id="customerModal">
        <div class="modal-content">
            <div class="modal-header detail-modal-header" id="customerModalHeader">
                
                <div class="detail-modal-header-titles">
                    <h2 id="customerModalName"></h2>
                    <div class="customer-phone-wrapper">
                        <p id="customerModalPhone"></p>
                        
                        <div class="icon-button-group">
                            <a href="#" id="customerModalCallBtn" class="icon-btn" title="Ring kund">
                                <svg class="icon-sm" viewBox="0 0 24 24"><use href="#icon-phone"></use></svg>
                            </a>
                            <a href="#" id="customerModalSmsBtn" class="icon-btn" title="Skicka SMS till kund">
                                <svg class="icon-sm" viewBox="0 0 24 24"><use href="#icon-chat"></use></svg>
                            </a>
                            <button class="icon-btn" id="editCustomerPhoneBtn" title="Redigera telefonnummer">
                                <svg class="icon-sm" viewBox="0 0 24 24"><use href="#icon-pencil"></use></svg>
                            </button>
                        </div>

                    </div>
                </div>

                <button class="modal-close-btn" id="customerModalCloseBtn" aria-label="Stäng modal">
                    <svg class="icon" viewBox="0 0 24 24"><use href="#icon-close"></use></svg>
                </button>
            </div>
            
            <div class="detail-stats">
                <div>
                    <span class="stat-title">Total Vinst</span>
                    <span class="stat-value" id="customerModalTotalProfit"></span>
                </div>
                <div>
                    <span class="stat-title">Antal Jobb</span>
                    <span class="stat-value" id="customerModalJobCount"></span>
                </div>
            </div>
            
            <div class="modal-body">
                <div class="search-wrapper">
                    <svg class="icon icon-search" viewBox="0 0 24 24"><use href="#icon-search"></use></svg>
                    <input type="search" id="customerSearch" placeholder="Filtrera jobb...">
                </div>
                <ul class="detail-job-list" id="customerModalJobList">
                    </ul>
            </div>
        </div>
    </div>
    
    <div id="carModal" class="modal-backdrop" data-modal-id="carModal">
        <div class="modal-content">
            <div class="modal-header detail-modal-header" id="carModalHeader">

            <div class="detail-modal-header-titles">
                <div class="modal-title-with-link">
                    <h2 id="carModalRegnr"></h2>
                    <button class="icon-btn" id="copyCarRegnrBtn" title="Kopiera Reg.nr">
                        <svg class="icon-sm" viewBox="0 0 24 24"><use href="#icon-clipboard"></use></svg>
                    </button>
                    <a id="carModalExternalLink" href="#" target="_blank" rel="noopener noreferrer" title="Öppna i Biluppgifter.se">
                        <img src="https://biluppgifter.se/favicon/favicon.ico" alt="Biluppgifter Ikon" />
                    </a>
                    <a id="carModalOljemagasinetLink" href="https://oljemagasinet.se/" target="_blank" rel="noopener noreferrer" title="Öppna i Oljemagasinet.se">
                        <img src="images/oljemagasinet-favico.png" alt="Oljemagasinet Ikon" style="width: 20px; height: 20px; border-radius: 4px;" />
                    </a>
                </div>
                <p id="carModalOwner"></p> 
            </div>

            <button class="modal-close-btn" id="carModalCloseBtn" aria-label="Stäng modal">
                <svg class="icon" viewBox="0 0 24 24"><use href="#icon-close"></use></svg>
            </button>
        </div>
            
            <div class="detail-stats">
                <div>
                    <span class="stat-title">Total Vinst</span>
                    <span class="stat-value" id="carModalTotalProfit"></span>
                </div>
                <div>
                    <span class="stat-title">Antal Jobb</span>
                    <span class="stat-value" id="carModalJobCount"></span>
                </div>
            </div>
            
            <div class="modal-body">
                <div class="search-wrapper">
                    <svg class="icon icon-search" viewBox="0 0 24 24"><use href="#icon-search"></use></svg>
                    <input type="search" id="carSearch" placeholder="Filtrera jobb...">
                </div>
                <ul class="detail-job-list" id="carModalJobList">
                </ul>
				</div>
				<div>
					<div class="sticky-link-buttons">
                    <a id="carModalExternalLinkMobile" href="https://biluppgifter.se/" target="_blank" rel="noopener noreferrer" class="button secondary">
                        <img src="https://biluppgifter.se/favicon/favicon.ico" alt="Biluppgifter Ikon" />
                        <span>Biluppgifter.se</span>
                    </a>
                    <a id="carModalOljemagasinetLinkMobile" href="https://oljemagasinet.se/" target="_blank" rel="noopener noreferrer" class="button secondary">
                        <img src="images/oljemagasinet-favico.png" alt="Oljemagasinet Ikon" style="width: 20px; height: 20px; border-radius: 4px;" />
                        <span>Oljemagasinet</span>
                    </a>
                </div>
			</div>
        </div>
    </div>

	<div id="statsModal" class="modal-backdrop" data-modal-id="statsModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Statistiköversikt</h2>
                <button class="modal-close-btn" id="statsModalCloseBtn" aria-label="Stäng modal">
                    <svg class="icon" viewBox="0 0 24 24"><use href="#icon-close"></use></svg>
                </button>
            </div>
            
            <div class="modal-body" id="statsModalBody">
				<div class="detail-stats" id="statsModalSummary">
                <div>
                    <span class="stat-title">Total Vinst</span>
                    <span class="stat-value" id="statsModalTotalProfit">0 kr</span>
                </div>
                <div>
                    <span class="stat-title">Totalt Antal Jobb</span>
                    <span class="stat-value" id="statsModalJobCount">0</span>
                </div>
				<div>
                <span class="stat-title">Dagens Vinst</span>
	                <span class="stat-value" id="statsModalDagensVinst">0 kr</span>
	            </div>
            </div>
                
                <div class="profit-goal-progress" id="profitGoalProgress" style="display: none;">
                    <div class="progress-bar-text">
                        <span class="current" id="profitGoalCurrent">0 kr</span>
                        <span class="goal" id="profitGoalTarget">Mål: 0 kr</span>
                    </div>
                    <div class="progress-bar-container">
                        <div class="progress-bar-fill" id="profitGoalFill"></div>
                    </div>
                </div>
                
                <h3 class="chart-title">Vinst per Månad</h3>
                <div class="chart-container">
                    <canvas id="statsChart"></canvas>
                </div>
                
                <h3 class="chart-title">Aktivitet per Veckodag</h3>
                <div class="chart-container" style="max-height: 220px;">
                    <canvas id="weekdayChart"></canvas>
                </div>
				<h3 class="chart-title">Topplistor</h3>
                <div class="top-lists-container">
                    <div id="topCustomersContainer">
                        </div>
                    <div id="topCarsContainer">
                        </div>
                </div>

                </div> </div>
    </div>

                </div>
        </div>
    </div>

	<div id="jobSummaryModal" class="modal-backdrop" data-modal-id="jobSummaryModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalSummaryTitle">Jobböversikt</h2>
                <button class="modal-close-btn" id="modalSummaryCloseBtn" aria-label="Stäng modal">
                    <svg class="icon" viewBox="0 0 24 24"><use href="#icon-close"></use></svg>
                </button>
            </div>
            
            <div class="modal-body" id="modalSummaryBody">
                
                <div class="summary-section">
                    <div class="summary-item">
                        <span class="summary-label">Kund</span>
                        <span class="summary-value" id="modalSummaryKundnamn"></span>
                    </div>
                    <div class="summary-item">
                        <span class="summary-label">Telefon</span>
                        <span class="summary-value" id="modalSummaryTelefon"></span>
                    </div>
                    <div class="summary-item">
                        <span class="summary-label">Reg.nr</span>
                        <span class="summary-value" id="modalSummaryRegnr"></span>
                    </div>
                </div>

                <div class="summary-section">
                    <div class="summary-item">
                        <span class="summary-label">Status</span>
                        <span class="summary-value" id="modalSummaryStatus"></span>
                    </div>
                    <div class="summary-item">
                        <span class="summary-label">Datum & Tid</span>
                        <span class="summary-value" id="modalSummaryDatum"></span>
                    </div>
                    <div class="summary-item">
                        <span class="summary-label">Mätarställning</span>
                        <span class="summary-value" id="modalSummaryMatarstallning"></span>
                    </div>
                </div>

                <div class="summary-section">
                    <h4 class="summary-section-title">Ekonomi</h4>
                    <div class="summary-grid">
                        <div class="summary-item">
                            <span class="summary-label">Kundpris</span>
                            <span class="summary-value positive" id="modalSummaryKundpris"></span>
                        </div>
                        <div class="summary-item">
                            <span class="summary-label">Total Utgift</span>
                            <span class="summary-value negative" id="modalSummaryTotalUtgift"></span>
                        </div>
                        <div class="summary-item">
                            <span class="summary-label">Vinst</span>
                            <span class="summary-value vinst" id="modalSummaryVinst"></span>
                        </div>
                    </div>
                    <div class="summary-item" id="modalSummaryExpenseBox">
                        <span class="summary-label">Specificerade Utgifter</span>
                        <ul class="summary-expense-list" id="modalSummaryExpenseList">
                            </ul>
                    </div>
                </div>

                <div class="summary-section">
                     <div class="summary-item">
                        <span class="summary-label">Kommentarer</span>
                        <p class="summary-comment" id="modalSummaryKommentarer"></p>
                    </div>
                </div>

            </div>
			
            <div class="modal-actions">
                <button type="button" class="button secondary" id="modalSummaryStangBtn">Stäng</button>
                <button type="button" class="button primary" id="modalSummaryEditBtn" data-job-id="">
                    <svg class="icon-sm" viewBox="0 0 24 24"><use href="#icon-pencil"></use></svg>
                    <span>Redigera</span>
                </button>
            </div>
        </div>
    </div>

    <div id="settingsModal" class="modal-backdrop" data-modal-id="settingsModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Mer & Inställningar</h2>
                <button class="modal-close-btn" id="settingsModalCloseBtn" aria-label="Stäng modal">
                    <svg class="icon" viewBox="0 0 24 24"><use href="#icon-close"></use></svg>
                </button>
            </div>
            
            <form id="settingsModalForm" class="modal-body">
                <div class="form-group">
                    <label for="profitGoalInput">Månadsmål Vinst (kr)</label>
                    <input type="number" id="profitGoalInput" placeholder="t.ex. 50000" min="0">
                    <p style="font-size: 0.8rem; color: var(--text-color-light); margin-top: 0.5rem;">
                        Sätt ett vinstmål för innevarande månad. Visas i statistik-översikten.
                    </p>
                </div>

                <div class="form-group">
                    <label>Standardvy vid Start</label>
                    <div class="settings-radio-group">
                        <input type="radio" id="defaultViewTimeline" name="defaultView" value="timeline" checked>
                        <label for="defaultViewTimeline">
                            <svg class="icon-sm" viewBox="0 0 24 24"><use href="#icon-timeline-view"></use></svg>
                            <span>Tidslinje</span>
                        </label>
                        
                        <input type="radio" id="defaultViewCalendar" name="defaultView" value="calendar">
                        <label for="defaultViewCalendar">
                            <svg class="icon-sm" viewBox="0 0 24 24"><use href="#icon-calendar-view"></use></svg>
                            <span>Kalender</span>
                        </label>
                    </div>
                </div>

                <div class="form-group settings-button-group" id="mobileSettingsGroup">
                    <hr style="border: none; border-top: 1px solid var(--border-color); margin: 0.5rem 0;">
                    <label>App-åtgärder</label>
                    <button type="button" class="button secondary" id="settingsThemeToggle">
                        <svg class="icon icon-sun" viewBox="0 0 24 24"><use href="#icon-sun"></use></svg>
                        <svg class="icon icon-moon" viewBox="0 0 24 24"><use href="#icon-moon"></use></svg>
                        <span>Växla Tema</span>
                    </button>
                    <button type="button" class="button secondary" id="settingsToggleCompactView">
                        <svg class="icon" viewBox="0 0 24 24"><use href="#icon-view-dense"></use></svg>
                        <span>Kompakt Vy</span>
                    </button>
                    <button type="button" class="button secondary" id="settingsLockAppBtn">
                        <svg class="icon" viewBox="0 0 24 24"><use href="#icon-lock-closed"></use></svg>
                        <span>Lås Appen</span>
                    </button>
                </div>

				<div class="form-group settings-button-group">
                    <hr style="border: none; border-top: 1px solid var(--border-color); margin: 0.5rem 0;">
                    <label>Externa Länkar</label>
                    
                    <a href="https://biluppgifter.se" target="_blank" rel="noopener noreferrer" class="button secondary">
                        <img src="https://biluppgifter.se/favicon/favicon.ico" alt="Biluppgifter Ikon" style="width: 20px; height: 20px; border-radius: 4px;">
                        <span>Biluppgifter</span>
                    </a>
                    
                    <a href="https://oljemagasinet.se" target="_blank" rel="noopener noreferrer" class="button secondary">
                        <img src="images/oljemagasinet-favico.png" alt="Oljemagasinet Ikon" style="width: 20px; height: 20px; border-radius: 4px;">
                        <span>Oljemagasinet</span>
                    </a>
                    
                    <a href="https://amarsut.github.io/lager/lager.html" target="_blank" rel="noopener noreferrer" class="button secondary">
                        <img src="images/192x192.png" alt="Lager Ikon" style="width: 20px; height: 20px; border-radius: 4px;">
                        <span>Lager & Art. Sökning</span>
                    </a>
                </div>

                <div class="form-group settings-button-group">
                    <hr style="border: none; border-top: 1px solid var(--border-color); margin: 0.5rem 0;">
                    <label>Data</label>
                    <button type="button" class="button secondary csv-export" id="exportCsvBtn">
                        <svg class="icon-sm" viewBox="0 0 24 24"><use href="#icon-download"></use></svg>
                        <span>Exportera alla jobb till CSV</span>
                    </button>
                </div>
                </form>
			
            <div class="modal-actions">
                <button type="button" class="button secondary" id="settingsModalCancelBtn">Avbryt</button>
                <button type="submit" class="button primary" id="settingsModalSaveBtn" form="settingsModalForm">Spara</button>
            </div>
        </div>
    </div>
    
    <div id="popoverBackdrop" class="popover-backdrop"></div>
    <div id="commentPopover">
        <div id="commentPopoverHeader">
            <h4>Anteckningar</h4>
            <button id="commentPopoverClose" class="icon-btn">
                <svg class="icon-sm" viewBox="0 0 24 24"><use href="#icon-close"></use></svg>
            </button>
        </div>
        <div id="commentPopoverContent">
            </div>
    </div>
    
    <div id="contextMenu">
        </div>
    
    <div id="toastNotification" class="toast"></div>

    <div id="pinLockModal" class="modal-backdrop" data-modal-id="pinLockModal">
        <div class="pin-lock-container">
            <a href="#" tabindex="-1" class="nav-logo" style="margin: 0 auto 1.5rem auto;">
                <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
			        <path d="M8 7H5a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3"/>
			        <path d="M16 2v6h-4V2h4zM12 11h.01"/>
			        <path d="M12 15h.01"/>
			        <path d="M12 19h.01"/>
			    </svg>
            </a>
            <h2>Ange PIN-kod</h2>
            <p>Ange din 4-siffriga PIN för att låsa upp.</p>
            <form id="pinLockForm">
                <input type="password" id="pinInput" maxlength="4" pattern="[0-9]*" inputmode="numeric" autocomplete="one-time-code" required>
                <p id="pinError"></p>
                <button type="submit" class="button primary" id="pinUnlockBtn" form="pinLockForm">Lås upp</button>
            </form>
        </div>
    </div>

	<script>
		// --- Firebase Config (Oförändrad) ---
        const firebaseConfig = {
		  apiKey: "AIzaSyDwCQkUl-je3L3kF7EuxRC6Dm6Gw2N0nJw",
		  authDomain: "planerare-f6006.firebaseapp.com",
		  projectId: "planerare-f6006",
		  storageBucket: "planerare-f6006.firebasestorage.app",
		  messagingSenderId: "360462069749",
		  appId: "1:360462069749:web:c754879f3f75d5ef3cbabc",
		  measurementId: "G-L6516XLZ1Y"
		};

		// --- REGISTRERA SERVICE WORKER FÖR PWA INSTALLATION ---
		if ('serviceWorker' in navigator) {
		    window.addEventListener('load', () => {
		        navigator.serviceWorker.register('./sw.js')
		            .then(registration => {
		                console.log('Service Worker registrerad framgångsrikt med scope:', registration.scope);
		            })
		            .catch(error => {
		                console.log('Service Worker registrering misslyckades:', error);
		            });
		    });
		}

        let db;
        try {
            firebase.initializeApp(firebaseConfig);
            db = firebase.firestore();
			/* OFFLINE STÖD */
			db.enablePersistence({synchronizeTabs: true})
            .then(() => {
                console.log("Offline-stöd aktiverat!");
            })
            .catch((err) => {
                if (err.code == 'failed-precondition') {
                    // Flera flikar är öppna, kan hända.
                    console.warn("Kunde inte aktivera offline-stöd, troligen pga flera flikar.");
                } else if (err.code == 'unimplemented') {
                    // Webbläsaren stöds inte (mycket ovanligt).
                    console.warn("Offline-stöd stöds inte i denna webbläsare.");
                }
            });
			/* SLUT PÅ OFFLINE STÖD */
            console.log("Firebase initierat!");
        } catch (e) {
            console.error("Kunde inte initiera Firebase.", e);
            alert("Kunde inte initiera Firebase.");
        }
	</script>

	<script src="app.js" defer></script>

</body>
</html>
