/* ==========================================================================
   LAGER.CSS - Konsoliderad & Optimerad Version 2025
   ========================================================================== */

/* --- 1. GRUNDLAYOUT & WRAPPERS --- */
.lager-pro-wrapper {
    display: flex;
    gap: 24px;
    background: #f4f7f9;
    min-height: 100vh;
    width: 100%;
}

/* --- 2. SIDEBAR (Desktop) --- */
.lager-sidebar-pro { width: 220px; flex-shrink: 0; }
.sidebar-card { 
    background: #fff; border-radius: 12px; padding: 18px; 
    border: 1px solid #e2e8f0; box-shadow: 0 1px 3px rgba(34, 18, 18, 0.05);
}
.sidebar-title { font-size: 11px; font-weight: 700; color: #94a3b8; text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 12px; }
.sidebar-divider { height: 1px; background: #f1f5f9; margin: 15px 0; }
.sidebar-sub-label { font-size: 10px; font-weight: 800; color: #94a3b8; text-transform: uppercase; margin-bottom: 10px; }

.sidebar-cat-link {
    display: flex; justify-content: space-between; align-items: center;
    padding: 10px 12px; border-radius: 8px; font-size: 14px; color: #64748b; cursor: pointer; transition: 0.2s;
}
.sidebar-cat-link:hover { background: #f8fafc; color: #2563eb; }
.sidebar-cat-link.active { background: #eff6ff; color: #2563eb; font-weight: 700; }
.cat-badge { background: #f1f5f9; padding: 2px 6px; border-radius: 10px; font-size: 10px; }

/* --- 3. TOOLBAR & SÖK --- */
.lager-toolbar-pro {
    background: #fff; border-radius: 12px; padding: 0 15px;
    display: flex !important; align-items: center; justify-content: space-between;
    margin-bottom: 24px; border: 1px solid #e2e8f0; height: 64px; gap: 15px; box-sizing: border-box;
}
.toolbar-right { display: flex; align-items: center; gap: 12px; flex: 1; }

.search-wrapper-pro { position: relative; flex: 1; display: flex; align-items: center; }
.search-icon-pro { position: absolute; left: 14px; top: 50%; transform: translateY(-50%); width: 16px; height: 16px; color: #94a3b8; }

#lagerSearchInput { 
    width: 100%; padding: 12px 15px 12px 42px; border-radius: 12px; 
    border: 1px solid #f1f5f9; font-size: 14px; background: #f8fafc; outline: none; transition: 0.2s;
}
#lagerSearchInput:focus { border-color: #3b82f6; background: #fff; }

#clearLagerSearch {
    position: absolute; right: 0; top: 55%; transform: translateY(-50%);
}

.filter-icon-wrapper {
    position: relative; width: 38px; height: 38px; background: #f8fafc;
    border: 1px solid #e2e8f0; border-radius: 10px; display: flex;
    align-items: center; justify-content: center; cursor: pointer; transition: all 0.2s; flex-shrink: 0;
}
.filter-icon-wrapper select { position: absolute; top: 0; left: 0; width: 100%; height: 100%; opacity: 0; cursor: pointer; }
.filter-nav-icon { width: 18px; height: 18px; color: #475569; }

/* --- 4. ARTIKELKORT (Core) --- */
.article-card-pro {
    background: #fff; border-radius: 12px; margin-bottom: 12px;
    display: flex; flex-direction: column !important;
    border: 1px solid #e2e8f0; overflow: hidden; width: 100%; transition: all 0.2s ease;
}

.card-main-content {
    display: flex; padding: 12px; gap: 12px; width: 100%; box-sizing: border-box; align-items: flex-start;
}

.card-img-box-pro { 
    width: 65px; height: 65px; background: #f8fafc; border-radius: 8px; 
    display: flex; align-items: center; justify-content: center; flex-shrink: 0; 
}

.card-info-pro { flex: 1; min-width: 0; }
.card-info-pro h3 { 
    font-size: 14px; font-weight: 700; color: #1e293b; margin: 0 0 2px 0;
    display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden;
}

.card-id-label { font-size: 9px; font-weight: 800; color: #cbd5e1; text-transform: uppercase; }
.card-ref-pro { font-size: 12px; color: #64748b; font-weight: 500; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }

.card-notes-pro { 
    font-size: 11px; color: #475569; margin-top: 6px !important; padding: 4px 8px !important;
    background: #f8fafc; border-radius: 6px; display: block !important; 
    overflow: hidden; text-overflow: ellipsis; font-style: italic;
}
.card-notes-pro {
    display: inline-block !important; /* Gör att den bara är så bred som texten */
    width: auto;
    max-width: 95%; 
    line-height: 1.4;
    padding: 4px 10px !important;
}

.card-actions-pro {
    display: flex; flex-direction: column; justify-content: space-between;
    align-items: flex-end; flex-shrink: 0; width: 85px; min-height: 80px;
}

.card-price-pro { font-size: 18px; font-weight: 800; color: #0f172a; line-height: 1; }
.stock-pill { padding: 2px 8px; border-radius: 4px; font-size: 10px; font-weight: 700; }
.stock-in { background: #ecfdf5; color: #10b981; }
.stock-out { background: #fef2f2; color: #ef4444; }

/* Ghost-button design */
.btn-redigera-pro { 
    background: transparent !important; color: #2563eb !important;
    border: 1.5px solid #2563eb !important; padding: 6px 10px;
    border-radius: 8px; font-size: 10px; font-weight: 700; 
    width: 100%; cursor: pointer; margin-top: 10px;
}
.btn-redigera-pro:hover { background: #2563eb !important; color: #fff !important; }

/* --- 5. EXPANSION & LEVERANTÖRER --- */
.supplier-button-row {
    display: none; gap: 8px; padding: 8px 12px 12px 12px;
    background: #fafbfc; border-top: 1px solid #f1f5f9;
    width: 100%; box-sizing: border-box; margin-top: -10px !important;
}
.article-card-pro.expanded .supplier-button-row { display: flex; }

.supplier-pill-btn {
    flex: 1; height: 38px; border-radius: 8px; display: flex;
    align-items: center; justify-content: center; transition: all 0.2s; text-decoration: none;
}
.supplier-pill-btn img { width: 20px; height: 20px; object-fit: contain; }
.supplier-name-text { margin-left: 2px; font-size: 10px; font-weight: 700; color: #1e293b; text-transform: uppercase; letter-spacing: 0.02em; }

/* --- 6. PRO EDIT DRAWER --- */
.lager-drawer {
    position: fixed; top: 0; right: 0 !important; left: auto !important;
    width: 450px; height: 100%; background: #fff; z-index: 30005;
    display: flex; flex-direction: column; transform: translateX(100%);
    visibility: hidden; transition: transform 0.4s cubic-bezier(0.16, 1, 0.3, 1), visibility 0.4s;
    box-shadow: -10px 0 50px rgba(0, 0, 0, 0.15);
}
.lager-drawer.open { transform: translateX(0); visibility: visible; }

.drawer-overlay {
    position: fixed; inset: 0; background: rgba(15, 23, 42, 0.5);
    backdrop-filter: blur(4px); display: none; z-index: 30004;
}
.drawer-overlay.show { display: block; }

.drawer-header { padding: 20px 24px; border-bottom: 1px solid #f1f5f9; display: flex; justify-content: space-between; align-items: center; }
.drawer-header h3 { font-size: 1.25rem; font-weight: 800; color: #0f172a; margin: 0; }

.drawer-body { padding: 24px; flex: 1; overflow-y: auto; display: flex; flex-direction: column; gap: 20px; }
.drawer-body .form-group label { display: block; font-size: 0.75rem; font-weight: 700; color: #64748b; text-transform: uppercase; margin-bottom: 8px; }
.drawer-body .input-gray { width: 100%; padding: 12px 16px; border-radius: 12px; background: #f8fafc; border: 1px solid #e2e8f0; font-size: 1rem; transition: all 0.2s; box-sizing: border-box; }
.drawer-body .input-gray:focus { background: #fff; border-color: #3b82f6; box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.1); outline: none; }

.form-row { display: flex; gap: 12px; width: 100%; }
.flex-1 { flex: 1 1 0; min-width: 0; }

.action-footer { margin-top: auto; padding-top: 10px; display: flex; gap: 12px; }
.btn-action { flex: 1; padding: 14px; border-radius: 12px; font-weight: 700; font-size: 0.9rem; text-transform: uppercase; border: none; cursor: pointer; transition: opacity 0.2s; }
.btn-save { background: #2563eb; color: white; }
.btn-delete { background: #fee2e2; color: #ef4444; }

.btn-add-article-icon {
    width: 36px !important;
    height: 36px !important;
    background: #2563eb !important;
    color: white !important;
    border: none !important;
    border-radius: 10px !important;
    box-shadow: 0 2px 8px rgba(37, 99, 235, 0.2) !important;
    flex-shrink: 0;
    display: flex !important;
    align-items: center;
    justify-content: center;
    opacity: 0.9;
}
    
.btn-add-article-icon svg {
    width: 20px !important;
    height: 20px !important;
    stroke-width: 3;
}

/* --- 7. DESKTOP SPECIFIKT (Over 768px) --- */
@media (min-width: 769px) {
    .article-card-pro { margin-bottom: 20px; border-radius: 16px; }
    .card-main-content { padding: 24px !important; gap: 24px; }
    .card-img-box-pro { width: 100px; height: 100px; }
    .card-info-pro h3 { font-size: 18px; }
    .card-actions-pro { width: 140px; gap: 12px; }
    .card-price-pro { font-size: 24px; }
    .supplier-button-row { padding: 16px 24px 20px 24px; }
}

/* --- 8. MOBILANPASSNING (Under 768px) --- */
@media (max-width: 768px) {
    body:has(#lagerView[style*="display: flex"]) .mobile-header { display: none !important; }
    .lager-pro-wrapper { padding: 0; flex-direction: column; }
    .lager-sidebar-pro { display: none !important; }

    .lager-toolbar-pro {
        position: fixed; top: 0; left: 0; width: 100%; height: 64px;
        z-index: 2000; margin-bottom: 0; border-radius: 0; border: none;
        padding: 0 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.05);
    }
    .mobile-filter-row {
        display: flex !important; position: fixed; top: 64px; left: 0; width: 100%;
        height: 50px; background: #fff; padding: 6px 10px; z-index: 1000;
        border-bottom: 1px solid #e2e8f0; box-sizing: border-box; gap: 6px;
    }
    .mobile-filter-row select {
        flex: 1; height: 36px !important; padding: 0 8px !important; font-size: 12px !important;
        font-weight: 600; border-radius: 8px; background-color: #f1f5f9; border: 1px solid #e2e8f0;
        color: #1e293b; line-height: 1 !important; appearance: auto; 
    }

    #lagerListElite { padding-top: 50px !important; padding-left: 0; padding-right: 0; padding-bottom: 0; }
    .lager-drawer { width: 100%; right: -100%; }
    
    .card-info-pro h3 { font-size: 12px; line-height: 1.1; max-height: 2.2em; }
    .card-img-box-pro { width: 60px; height: 80px; }
    .card-notes-pro { display: -webkit-box !important; -webkit-line-clamp: 2; -webkit-box-orient: vertical; }
}

/* Checkbox */
.status-chips-container { display: flex; flex-direction: column; gap: 12px; margin-top: 10px; padding-left: 4px; }
.filter-chip { display: flex; align-items: center; gap: 10px; cursor: pointer; font-size: 13px; color: #64748b; font-weight: 500; transition: 0.2s; user-select: none; }
.filter-chip input[type="checkbox"] { width: 16px; height: 16px; accent-color: #3b82f6; cursor: pointer; }

/* Grå bakgrund på kommentar - sträcka sig så långt kommentaren går och inte mer */
.card-notes-pro {
    display: inline-block !important; /* Gör att den bara är så bred som texten */
    width: auto;
    max-width: 95%; 
    line-height: 1.4;
    padding: 4px 10px !important;
}

/* Mer kompakt redigera meny */
.drawer-body { padding: 16px 20px !important; /* Mindre luft runt om */ gap: 12px !important; /* Tätare mellan fältgrupper */ }
.drawer-body .form-group label { margin-bottom: 4px !important; /* Tätare etiketter */ font-size: 0.7rem !important; }
.drawer-body .input-gray { padding: 10px 14px !important; /* Lägre höjd på inmatningsfälten */ font-size: 0.95rem !important; }
.drawer-header { padding: 14px 20px !important; /* Lägre header */ }
/* Spara/Radera knappar längst ner i redigera meny */
.action-footer { padding-top: 5px !important; }
.btn-action { padding: 12px !important; }

@media (max-width: 768px) {
    /* Ta bort gammal sorteringsknapp i headern */
    .lager-toolbar-pro .filter-icon-wrapper { display: none !important; }

    /* 3. Filter-raden (Chips) - Optimerad */
    .mobile-filter-row {
        position: fixed !important;
        top: 56px; 
        left: 0; 
        width: 100%;
        height: 42px !important; /* Något lägre för att minska "luft" */
        background: #fff;
        z-index: 2050;
        display: flex !important;
        align-items: center;
        padding: 0 10px !important;
        gap: 6px !important; /* Tätare mellan knapparna */
        border-bottom: 1px solid #e2e8f0;
        overflow-x: auto;
        
        /* Döljer scrollbar för Firefox och IE */
        scrollbar-width: none; 
        -ms-overflow-style: none; 
    }

    /* Döljer scrollbar för Chrome, Safari och Edge */
    .mobile-filter-row::-webkit-scrollbar {
        display: none;
    }

    /* Styla Chips/Selects för att vara smalare och snyggare */
    .mobile-filter-row select, 
    #sortSelect {
        flex: 0 0 auto !important;
        height: 30px !important; /* Lägre höjd */
        padding: 0 10px 0 5px !important; /* Mer padding höger för pil, mindre vänster */
        background: #f8fafc !important;
        border: 1px solid #e2e8f0 !important;
        border-radius: 10px !important; /* Något mindre rundat för modernare look */
        font-size: 12px !important; /* Mindre text sparar bredd */
        font-weight: 600;
        color: #1e293b;
        
        /* appearance: none gör att vi kan styra bredden exakt */
        appearance: none !important; 
        -webkit-appearance: none !important;
        
        /* Lägg till en egen, mindre pil för att spara plats */
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%2364748b'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M19 9l-7 7-7-7'%3E%3C/path%3E%3C/svg%3E") !important;
        background-repeat: no-repeat !important;
        background-position: right 6px center !important;
        background-size: 12px !important;
    }

    /* 4. Fix för luften under knapparna */
    #lagerListElite {
        /* Toolbar (56px) + Filter-rad (42px) = 98px. 
        Vi sätter 102px för att få en perfekt liten glipa till första kortet. */
        padding-top: 35px !important; 
    }

    /* Tvinga bort eventuell marginal på första kortet */
    .article-card-pro:first-child {
        margin-top: 0 !important;
    }
}
