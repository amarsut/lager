/* ==========================================================================
   DASHBOARD CARDS (STATISTIK-KORTEN PÅ STARTSIDAN)
   Fil: dashboard-cards.css
   Beskrivning: Hanterar korten för Kommande, Faktureras, Klar etc.
   ========================================================================== */

/* --- 1. CONTAINERN (STAT-BAR) --- */
.stat-bar {
    gap: 12px;
    margin-bottom: 2rem;
    /* Layout (Flex/Grid) styrs i Media Queries nedan */
}

/* --- 2. BAS-STIL FÖR KORTEN --- */
.stat-card {
    background: #fff;
    border: 1px solid #f3f4f6;
    box-shadow: 0 2px 4px rgba(0,0,0,0.02);
    border-radius: 4px; /* Eller vad du föredrar */
    
    /* Layout inuti kortet */
    display: flex;
    flex-direction: column;
    justify-content: space-between; /* Trycker isär Rubrik och Siffra */
    
    padding: 16px 20px;
    position: relative;
    cursor: pointer;
    transition: transform 0.2s, box-shadow 0.2s, border-color 0.2s, background-color 0.2s;
    
    /* Osynlig border i botten som tänds vid active */
    border-bottom: 4px solid transparent !important;
}

.stat-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
}

/* --- 3. INNEHÅLL (TEXT & SIFFROR) --- */
.stat-card-title {
    font-size: 0.75rem;
    font-weight: 600;
    color: #64748b;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    margin: 0 0 8px 0;
    display: flex; 
    align-items: center; 
    gap: 8px;
    white-space: nowrap;
}

.stat-card-value {
    font-size: 2rem;
    font-weight: 700;
    line-height: 1;
    margin: 0; /* VIKTIGT: Ingen margin som knuffar runt den */
    
    /* Siffror tar lika stor plats (snyggare) */
    font-variant-numeric: tabular-nums;
    font-feature-settings: "tnum";
}

/* Ikoner */
.stat-card-title svg, 
.stat-card-title .icon-sm {
    width: 18px; height: 18px; flex-shrink: 0;
    color: currentColor;
}

/* Aktivt kort (Markerat) */
.stat-card.active {
    background-color: #eff6ff; 
    border-color: #bfdbfe;     
    box-shadow: 0 4px 6px -1px rgba(59, 130, 246, 0.1);
    transform: translateY(-2px);
}

/* =========================================
   FÄRGTEMAN (COLORS)
   ========================================= */

/* Kommande (Blå) */
.stat-card[data-filter="kommande"] { color: var(--primary-color, #0066FF); }
.stat-card[data-filter="kommande"].active { border-bottom-color: var(--primary-color, #0066FF) !important; }

/* Faktureras (Lila) */
.stat-card[data-filter="faktureras"] { color: var(--invoice-color, #bf5af2); }
.stat-card[data-filter="faktureras"].active { border-bottom-color: var(--invoice-color, #bf5af2) !important; }

/* Klar (Grön) */
.stat-card[data-filter="klar"] { color: var(--success-color, #30d158); }
.stat-card[data-filter="klar"].active { border-bottom-color: var(--success-color, #30d158) !important; }

/* Offererad (Orange/Blå kombo) */
.stat-card[data-filter="offererad"] { color: var(--info-color, #0a84ff); }
.stat-card[data-filter="offererad"].active { border-bottom-color: var(--info-color, #0a84ff) !important; }

/* Backlog / Ej Bokat (Mörk Orange) */
.stat-card[data-filter="backlog"] {
    background: linear-gradient(135deg, #ffffff 0%, #fff7ed 100%) !important;
    border-color: #ffedd5 !important;
}
.stat-card[data-filter="backlog"] .stat-card-value,
.stat-card[data-filter="backlog"] .stat-card-title svg { color: #ea580c !important; }
.stat-card[data-filter="backlog"] .stat-card-title span { color: #9a3412 !important; }
.stat-card[data-filter="backlog"].active {
    border-bottom-color: #ea580c !important;
    background-color: #fff7ed !important;
}

/* Alla Jobb (Svart/Grå) */
.stat-card[data-filter="alla"] { color: #6B7280; }
.stat-card[data-filter="alla"] .stat-card-value { color: #111827; }
.stat-card[data-filter="alla"].active { border-bottom-color: #111827 !important; }


/* =========================================
   MOBILANPASSNING (SWIPE-LISTA)
   ========================================= */
@media (max-width: 768px) {
    .stat-bar {
        display: flex;       /* Lägg på rad */
        flex-wrap: nowrap !important;   /* Ingen radbrytning */
        overflow-x: auto !important;    /* Scrolla i sidled */
        
        /* Luft runt om */
        padding: 4px 16px 20px 16px !important; 
        margin-bottom: 5px !important;
        margin-right: -16px; /* Kompensera för sid-padding */
        
        /* Dölj scrollbar */
        scrollbar-width: none; 
        -ms-overflow-style: none;
    }
    .stat-bar::-webkit-scrollbar { display: none; }

    .stat-card {
        /* EXAKT 2.5 kort synliga (40% bredd) */
        flex: 0 0 40vw !important; 
        width: 40vw !important;
        
        /* Fast höjd för enhetlighet */
        height: 140px !important; 
        min-height: 140px !important;
        
        padding: 16px !important;
        
        /* Nollställ eventuella gamla desktop-regler */
        min-width: unset !important;
        max-width: unset !important;
    }

    .stat-card-value {
        font-size: 1.8rem !important; 
        margin-top: auto !important; /* Tryck ner siffran till botten */
    }
}


/* =========================================
   DATORANPASSNING (GRID)
   ========================================= */
@media (min-width: 769px) {
    .stat-bar {
        display: grid;
        /* Auto-fit gör att de fyller raden snyggt */
        grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
        grid-auto-rows: 1fr; /* Alla kort lika höga */
        align-items: stretch;
    }
    
    .stat-card {
        height: 100%;
        width: 100%;
        min-height: 150px; /* Lite högre på datorn */
    }
}

/* =========================================
   FIX FÖR EJ BOKAT (BACKLOG) LAYOUT
   ========================================= */

/* Gör kortet till en flex-kolumn så vi kan byta ordning på sakerna */
.stat-card[data-filter="backlog"] {
    display: flex;
    flex-direction: column;
}

/* 1. Rubriken ska ligga överst (Order 1) */
.stat-card[data-filter="backlog"] .stat-card-title {
    order: 1;
}

/* 2. Textraden "3 väntar..." ska ligga i mitten (Order 2) */
.backlog-row {
    order: 2;               /* Lägg den som nummer 2 */
    display: flex;          /* Lägg innehållet på en rad (Inte 2 rader!) */
    flex-direction: row;
    gap: 12px;              /* Luft mellan "väntar" och "offert" */
    
    font-size: 0.75rem;     /* Lagom liten text */
    font-weight: 600;
    color: #ea580c;         /* Orange textfärg */
    
    margin-bottom: auto;    /* MAGI: Detta trycker ner allt under (siffran) till botten */
    width: 100%;
    padding-top: 4px;       /* Lite luft upp mot rubriken */
}

/* 3. Siffran ska ligga längst ner (Order 3) */
.stat-card[data-filter="backlog"] .stat-card-value {
    order: 3;               /* Lägg den sist */
    margin-top: 0 !important; /* Nollställ marginaler så den inte "flyter" fel */
    margin-bottom: 0 !important;
}

/* Ny styling för uppdelad statistik i "Ej bokat"-kortet */
.backlog-row {
    display: flex !important;
    flex-direction: column !important; /* Stapla raderna på varandra */
    gap: 6px !important;               /* Luft mellan raderna */
    width: 100%;
    margin-top: auto;                  /* Tryck ner till botten */
}

.stat-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-size: 0.8rem;
    color: #64748b;
}

.stat-value-pill {
    font-weight: 700;
    color: #ea580c;           /* Orange text */
    background: #ffedd5;      /* Ljus orange bakgrund */
    padding: 2px 8px;
    border-radius: 12px;
    font-size: 0.75rem;
}

/* --- Uppdaterad design för Ej Bokat-kortet --- */

/* Gör så att raderna hamnar under varandra */
.backlog-row {
    display: flex !important;
    flex-direction: column !important;
    gap: 8px !important;
    width: 100%;
    margin-top: auto; /* Trycker ner infon till botten av kortet */
    padding-top: 8px;
}

/* Enskild rad (Väntar ... 3) */
.stat-row-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-size: 0.85rem;
    color: #64748b;
    width: 100%;
}

/* Siffer-brickan (Pill) */
.stat-badge {
    font-weight: 700;
    padding: 2px 10px;
    border-radius: 12px;
    font-size: 0.75rem;
    min-width: 30px;
    text-align: center;
}

/* Färger för brickorna */
.stat-badge.orange {
    background-color: #fff7ed;
    color: #c2410c;
    border: 1px solid #ffedd5;
}

.stat-badge.blue {
    background-color: #eff6ff;
    color: #1d4ed8;
    border: 1px solid #dbeafe;
}

/* --- Minimalistisk design för Ej Bokat --- */

/* Justera huvudsiffran så den inte tar för mycket plats nedåt */
.stat-card[data-filter="backlog"] .stat-card-value {
    margin-bottom: 4px !important;
}

/* Behållaren för de små siffrorna */
.backlog-row {
    margin-top: 0;
    width: 100%;
}

.mini-stat-wrapper {
    display: flex;
    gap: 16px; /* Luft mellan grupperna */
    align-items: center;
}

/* Enskild grupp (Prick + Siffra) */
.mini-stat {
    display: flex;
    align-items: center;
    gap: 6px; /* Avstånd mellan prick och siffra */
}

/* Den färgade pricken */
.status-dot {
    width: 8px;
    height: 8px;
    border-radius: 50%;
    display: block;
}

/* Siffran - Fet och mörkgrå för läsbarhet */
.status-num {
    font-size: 1.1rem;
    font-weight: 700;
    color: #334155; /* Mörkgrå, nästan svart */
    line-height: 1;
}

/* Färgteman - Justera dessa hex-koder om du vill ha exakt dina nyanser */
.mini-stat.orange .status-dot { background-color: #ef4444;box-shadow: 0 0 0 2px #fee2e2; } /* Röd/Orange med glow */
.mini-stat.blue .status-dot { background-color: #bf5af2; box-shadow: 0 0 0 2px #f5d0fe; } /* Rosa/Lila med glow */

/* Hover-effekt för att visa vad det betyder (valfritt, bra för desktop) */
.mini-stat:hover .status-dot { transform: scale(1.2); transition: transform 0.2s; }
