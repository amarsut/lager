/* ==========================================================================
   DASHBOARD CARDS (STATISTIK-KORTEN PÅ STARTSIDAN)
   Fil: dashboard-cards.css
   Beskrivning: Hanterar korten för Kommande, Faktureras, Klar etc.
   ========================================================================== */

/* --- 1. CONTAINERN (STAT-BAR) --- */
.stat-bar {
    gap: 12px;
    margin-bottom: 2rem;
    /* Layout (Flex/Grid) styrs i Media Queries nedan */
}

/* --- 2. BAS-STIL FÖR KORTEN --- */
.stat-card {
    background: #fff;
    border: 1px solid #f3f4f6;
    box-shadow: 0 2px 4px rgba(0,0,0,0.02);
    border-radius: 4px; /* Eller vad du föredrar */
    
    /* Layout inuti kortet */
    display: flex;
    flex-direction: column;
    justify-content: space-between; /* Trycker isär Rubrik och Siffra */
    
    padding: 16px 20px 32px 20px;
    position: relative;
    cursor: pointer;
    transition: transform 0.2s, box-shadow 0.2s, border-color 0.2s, background-color 0.2s;
    
    /* Osynlig border i botten som tänds vid active */
    border-bottom: 4px solid transparent !important;
}

.stat-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
}

/* --- 3. INNEHÅLL (TEXT & SIFFROR) --- */
.stat-card-title {
    font-size: 0.75rem;
    font-weight: 600;
    color: #64748b;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    margin: 0 0 8px 0;
    display: flex; 
    align-items: center; 
    gap: 8px;
    white-space: nowrap;
}

.stat-card-value {
    font-size: 2rem;
    font-weight: 700;
    line-height: 1;
    margin: 0; /* VIKTIGT: Ingen margin som knuffar runt den */
    
    /* Siffror tar lika stor plats (snyggare) */
    font-variant-numeric: tabular-nums;
    font-feature-settings: "tnum";
}

/* Ikoner */
.stat-card-title svg, 
.stat-card-title .icon-sm {
    width: 18px; height: 18px; flex-shrink: 0;
    color: currentColor;
}

/* Aktivt kort (Markerat) */
.stat-card.active {
    background-color: #eff6ff; 
    border-color: #bfdbfe;     
    box-shadow: 0 4px 6px -1px rgba(59, 130, 246, 0.1);
    transform: translateY(-2px);
}

/* =========================================
   FÄRGTEMAN (COLORS)
   ========================================= */

/* Kommande (Blå) */
.stat-card[data-filter="kommande"] { color: var(--primary-color, #0066FF); }
.stat-card[data-filter="kommande"].active { border-bottom-color: var(--primary-color, #0066FF) !important; }

/* Faktureras (Lila) */
.stat-card[data-filter="faktureras"] { color: var(--invoice-color, #bf5af2); }
.stat-card[data-filter="faktureras"].active { border-bottom-color: var(--invoice-color, #bf5af2) !important; }

/* Klar (Grön) */
.stat-card[data-filter="klar"] { color: var(--success-color, #30d158); }
.stat-card[data-filter="klar"].active { border-bottom-color: var(--success-color, #30d158) !important; }

/* Offererad (Orange/Blå kombo) */
.stat-card[data-filter="offererad"] { color: var(--info-color, #0a84ff); }
.stat-card[data-filter="offererad"].active { border-bottom-color: var(--info-color, #0a84ff) !important; }

/* Backlog / Ej Bokat (Mörk Orange) */
.stat-card[data-filter="backlog"] {
    background: linear-gradient(135deg, #ffffff 0%, #fff7ed 100%) !important;
    border-color: #ffedd5 !important;
}
.stat-card[data-filter="backlog"] .stat-card-value,
.stat-card[data-filter="backlog"] .stat-card-title svg { color: #ea580c !important; }
.stat-card[data-filter="backlog"] .stat-card-title span { color: #9a3412 !important; }
.stat-card[data-filter="backlog"].active {
    border-bottom-color: #ea580c !important;
    background-color: #fff7ed !important;
}

/* Alla Jobb (Svart/Grå) */
.stat-card[data-filter="alla"] { color: #6B7280; }
.stat-card[data-filter="alla"] .stat-card-value { color: #111827; }
.stat-card[data-filter="alla"].active { border-bottom-color: #111827 !important; }


/* =========================================
   MOBILANPASSNING (SWIPE-LISTA)
   ========================================= */
@media (max-width: 768px) {
    .stat-bar {
        display: flex;       /* Lägg på rad */
        flex-wrap: nowrap !important;   /* Ingen radbrytning */
        overflow-x: auto !important;    /* Scrolla i sidled */
        
        /* Luft runt om */
        padding: 4px 16px 20px 16px !important; 
        margin-bottom: 5px !important;
        margin-right: -16px; /* Kompensera för sid-padding */
        
        /* Dölj scrollbar */
        scrollbar-width: none; 
        -ms-overflow-style: none;
    }
    .stat-bar::-webkit-scrollbar { display: none; }

    .stat-card {
        /* Smalare: ca 3 kort synliga (32% bredd) */
        flex: 0 0 32vw !important; 
        width: 32vw !important;
        
        /* Högre kort */
        height: 170px !important; 
        min-height: 170px !important;
        
        padding: 16px !important;
        
        /* Nollställ eventuella gamla desktop-regler */
        min-width: unset !important;
        max-width: unset !important;
    }

    .stat-card-value {
        font-size: 1.8rem !important; 
        margin-top: auto !important; /* Tryck ner siffran till botten */
    }

   /* Anpassningar för Ej Bokat-texten på mobil */
    .backlog-row {
        left: 16px !important; /* Justera vänsterkanten så den matchar mobil-padding */
        bottom: 8px !important; /* Ligg kvar snyggt i botten */
    }

    .sub-stat {
        font-size: 0.6rem !important; /* Mindre text (VÄNTAR/OFFERT) */
        letter-spacing: 0px !important; /* Spara plats */
    }

    .sub-val {
        font-size: 0.7rem !important; /* Mindre siffror */
        margin-left: 2px !important;
    }

    .stat-inline-row {
        gap: 8px !important; /* Minska avståndet mellan grupperna */
    }
}


/* =========================================
   DATORANPASSNING (GRID)
   ========================================= */
@media (min-width: 769px) {
    .stat-bar {
        display: grid;
        /* Smalare spalter: minmax 140px */
        grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
        grid-auto-rows: 1fr; 
        align-items: stretch;
    }
    
    .stat-card {
        height: 100%;
        width: 100%;
        min-height: 180px; /* Betydligt högre på datorn */
    }
}

/* =========================================
   FIX FÖR EJ BOKAT - PROFFSIG & MINIMAL
   ========================================= */

/* Gör kortet redo för absolut positionering */
.stat-card[data-filter="backlog"] {
    position: relative;
}

/* Huvudsiffran (5) - Rör den inte, så den linjerar med andra kort */
.stat-card[data-filter="backlog"] .stat-card-value {
    margin-bottom: 0 !important; 
    /* Om siffran krockar med texten, öka padding-bottom på kortet nedan istället */
}

/* Textraden - Placerad absolut i botten */
.backlog-row {
    position: absolute;
    bottom: 6px;        /* Ligger precis ovanför den färgade linjen */
    left: 20px;         /* Matchar kortets padding (samma som titeln) */
    width: auto;
    
    display: block;     /* Säkerställer att containern beter sig normalt */
    margin: 0;
    padding: 0;
    pointer-events: none; /* Gör att man klickar "igenom" texten på kortet */
}

/* Behållare för raden */
.stat-inline-row {
    display: flex;
    align-items: right;
    gap: 5px;          /* Luft mellan "Väntar" och "Offert" */
}

/* Texten "Väntar" / "Offert" */
.sub-stat {
    font-size: 0.65rem;      /* Liten, diskret storlek */
    color: #94a3b8;         /* Ljusgrå (skriker inte) */
    font-weight: 400;
    text-transform: uppercase; /* Gör det lite mer "dashboard-aktigt" */
    letter-spacing: 0.03em;
}

/* Siffrorna (3 och 2) */
.sub-val {
    color: #475569;         /* Mörkare grå för läsbarhet */
    font-weight: 500;
    margin-left: 2px;       /* Liten luft mellan text och siffra */
    font-size: 0.65rem;
}

/* Valfritt: En liten prick emellan om du vill ha separation utan streck */
/* .sub-spacer { ... } - Lämna tom för bara mellanrum */
