<!DOCTYPE html>
<html lang="sv">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lager App</title>
    <link rel="stylesheet" href="style.css">
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="/icons/icon-192x192.png">
    <meta name="theme-color" content="#333333">
</head>
<body>
    <div class="container">
        <header class="header">
            <div class="header-left">
                <button id="menu-button" class="icon-button menu-button" aria-label="Meny">â˜°</button>
                <input type="text" id="global-search-input" placeholder="SÃ¶k..." class="global-search-input">
                <div id="search-dropdown" class="search-dropdown hidden"></div>
            </div>
            <h1 class="app-title">Lager</h1>
            <div class="header-right">
                <button id="add-item-header-button" class="icon-button" aria-label="LÃ¤gg till artikel">âž•</button>
                <button id="theme-toggle" class="icon-button theme-toggle" aria-label="VÃ¤xla tema">ðŸ’¡</button>
                <button id="sync-button" class="icon-button sync-button" aria-label="Synkronisera data">ðŸ”„</button>
            </div>
        </header>

        <div class="filter-bar desktop-only">
            <input type="text" id="desktop-search-input" placeholder="SÃ¶k i lagret..." class="search-input">
            <div class="category-filters">
                <button class="filter-button active" data-category="Alla">Alla</button>
                <button class="filter-button" data-category="Verktyg">Verktyg</button>
                <button class="filter-button" data-category="Fordon">Fordon</button>
                <button class="filter-button" data-category="Service">Service</button>
                <button class="filter-button" data-category="Material">Material</button>
                <button class="filter-button" data-category="Ã–vrigt">Ã–vrigt</button>
            </div>
        </div>

        <div class="stats-overview">
            <div class="stat-card">
                <h3>Totalt antal artiklar</h3>
                <p id="stat-total-items">0</p>
            </div>
            <div class="stat-card">
                <h3>Total kvantitet</h3>
                <p id="stat-total-units">0</p>
            </div>
        </div>

        <main class="main-content">
            <div class="inventory-table-container">
                <table class="inventory-table">
                    <thead>
                        <tr>
                            <th class="header-cell">
                                <span data-sort="name">Artikel <span class="sort-icon"></span></span>
                            </th>
                            <th class="header-cell desktop-only">
                                <span data-sort="category">Kategori <span class="sort-icon"></span></span>
                            </th>
                            <th class="header-cell">
                                <span data-sort="quantity">Antal <span class="sort-icon"></span></span>
                            </th>
                            <th class="header-cell desktop-only">
                                <span data-sort="price">Pris <span class="sort-icon"></span></span>
                            </th>
                            <th class="header-cell desktop-only">
                                <span data-sort="location">Plats <span class="sort-icon"></span></span>
                            </th>
                            <th class="header-cell desktop-only">
                                <span data-sort="notes">Anteckningar <span class="sort-icon"></span></span>
                            </th>
                            <th class="header-cell">Ã…tgÃ¤rder</th>
                        </tr>
                    </thead>
                    <tbody id="inventory-list">
                        </tbody>
                </table>
            </div>

            <div id="empty-inventory-message" class="empty-inventory-message hidden">
                <p>Inga artiklar i lagret.</p>
                <button id="add-first-item-button" class="button primary-button">LÃ¤gg till fÃ¶rsta artikeln</button>
            </div>

            <div id="artikel-kort-lista" class="artikel-kort-lista">
                </div>
        </main>

        <button id="add-item-fab" class="fab" aria-label="LÃ¤gg till ny artikel">âž•</button>

        <div id="toast-container" class="toast-container"></div>

        <div id="edit-item-modal" class="modal">
            <div class="modal-content">
                <span class="close-button" data-modal="edit-item-modal">&times;</span>
                <h2>Redigera artikel</h2>
                <form id="edit-item-form" class="item-form">
                    <input type="hidden" id="edit-item-id">
                    <label for="edit-name">Artikelnamn:</label>
                    <input type="text" id="edit-name" required>

                    <label for="edit-category">Kategori:</label>
                    <select id="edit-category" required>
                        <option value="Verktyg">Verktyg</option>
                        <option value="Fordon">Fordon</option>
                        <option value="Service">Service</option>
                        <option value="Material">Material</option>
                        <option value="Ã–vrigt">Ã–vrigt</option>
                    </select>

                    <div class="quantity-controls">
                        <label for="edit-quantity">Antal:</label>
                        <div class="quantity-input-group">
                            <button type="button" class="quantity-button decrease" data-type="edit">-</button>
                            <input type="number" id="edit-quantity" min="0" required>
                            <button type="button" class="quantity-button increase" data-type="edit">+</button>
                        </div>
                    </div>

                    <label for="edit-price">Pris (SEK):</label>
                    <input type="number" id="edit-price" min="0" step="0.01">

                    <label for="edit-location">Plats:</label>
                    <input type="text" id="edit-location">

                    <label for="edit-notes">Anteckningar:</label>
                    <textarea id="edit-notes"></textarea>

                    <div class="modal-actions">
                        <button type="submit" class="button primary-button">Spara Ã¤ndringar</button>
                        <button type="button" class="button delete-button" id="delete-item-button">Radera artikel</button>
                        <button type="button" class="button secondary-button close-modal-button" data-modal="edit-item-modal">Avbryt</button>
                    </div>
                </form>
            </div>
        </div>

        <div id="add-item-modal" class="modal">
            <div class="modal-content">
                <span class="close-button" data-modal="add-item-modal">&times;</span>
                <h2>LÃ¤gg till ny artikel</h2>
                <form id="add-item-form" class="item-form">
                    <label for="add-name">Artikelnamn:</label>
                    <input type="text" id="add-name" required>

                    <label for="add-category">Kategori:</label>
                    <select id="add-category" required>
                        <option value="Verktyg">Verktyg</option>
                        <option value="Fordon">Fordon</option>
                        <option value="Service">Service</option>
                        <option value="Material">Material</option>
                        <option value="Ã–vrigt">Ã–vrigt</option>
                    </select>

                    <div class="quantity-controls">
                        <label for="add-quantity">Antal:</label>
                        <div class="quantity-input-group">
                            <button type="button" class="quantity-button decrease" data-type="add">-</button>
                            <input type="number" id="add-quantity" min="0" value="1" required>
                            <button type="button" class="quantity-button increase" data-type="add">+</button>
                        </div>
                    </div>

                    <label for="add-price">Pris (SEK):</label>
                    <input type="number" id="add-price" min="0" step="0.01">

                    <label for="add-location">Plats:</label>
                    <input type="text" id="add-location">

                    <label for="add-notes">Anteckningar:</label>
                    <textarea id="add-notes"></textarea>

                    <div class="modal-actions">
                        <button type="submit" class="button primary-button">LÃ¤gg till artikel</button>
                        <button type="button" class="button secondary-button close-modal-button" data-modal="add-item-modal">Avbryt</button>
                    </div>
                </form>
            </div>
        </div>

    </div> <script type="module" src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js"></script>
    <script type="module" src="https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js"></script>
    <script type="module" src="apps.js"></script>
    <script>
        // Service Worker registrering
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/service-worker.js')
                    .then(registration => {
                        console.log('ServiceWorker registered: ', registration);
                    })
                    .catch(registrationError => {
                        console.log('ServiceWorker registration failed: ', registrationError);
                    });
            });
        }
    </script>
</body>
</html>
