<!DOCTYPE html>
<html lang="sv">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dynamisk Lagerförteckning med Firebase</title>
    <style>
    /* Importerar Google Font "Inter" */
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap');

    :root {
        /* Färgpalett LJUST LÄGE (Standard) */
        --primary-color: #5a7dff;
        --primary-dark: #3a57e8;
        --success-color: #00c853;
        --danger-color: #ff3d00;
        --warning-color: #ffab00;
        --info-color: #00b0ff;
        --bg-light: #f4f6f9;
        --bg-medium: #eef1f5;
        --bg-dark: #dfe3e8; /* --- NY --- */
        --text-dark: #1f2937;
        --text-light: #6b7280; /* --- NY --- */
        --border-color: #e5e7eb;
        --card-bg: #ffffff;
        --card-shadow: 0 6px 16px rgba(0, 0, 0, 0.05);
        --input-bg: #f9fafb;
        --orange-asterisk: #ff6e40;
    }

    /* MÖRKT LÄGE */
    .dark-mode:root {
        --primary-color: #6a8cff;
        --primary-dark: #4d69ff;
        --success-color: #69f0ae;
        --danger-color: #ff8a80;
        --warning-color: #ffe57f;
        --info-color: #80d8ff;
        --bg-light: #1f2937;
        --bg-medium: #111827;
        --bg-dark: #000000;
        --text-dark: #f9fafb;
        --text-light: #9ca3af;
        --border-color: #374151;
        --card-bg: #374151;
        --card-shadow: 0 6px 16px rgba(0, 0, 0, 0.2);
        --input-bg: #1f2937;
    }

    * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
    }

    body {
        font-family: 'Inter', sans-serif;
        background-color: var(--bg-light);
        color: var(--text-dark);
        transition: background-color 0.3s, color 0.3s;
        min-height: 100vh;
        padding-bottom: 80px; /* För att ge plats för FAB */
    }

    main {
        max-width: 1400px;
        margin: 0 auto;
        padding: 20px;
    }

    h1 {
        color: var(--primary-color);
        margin-bottom: 25px;
        font-weight: 800;
        font-size: 2.5rem;
    }
    
    .stats-container {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 20px;
        margin-bottom: 30px;
    }

    .stat-card {
        background-color: var(--card-bg);
        border-radius: 12px;
        padding: 20px 25px;
        box-shadow: var(--card-shadow);
        transition: background-color 0.3s, box-shadow 0.3s;
        border: 1px solid var(--border-color);
    }
    
    .stat-card h4 {
        margin-bottom: 5px;
        color: var(--text-light);
        font-weight: 500;
        font-size: 1em;
    }

    .stat-card p {
        font-size: 2em;
        font-weight: 700;
        color: var(--text-dark);
    }

    .stat-total { color: var(--primary-color) !important; }
    .stat-low { color: var(--warning-color) !important; }
    .stat-out { color: var(--danger-color) !important; }

    /* --- FORMULÄR & KNAPPAR --- */
    .form-group {
        margin-bottom: 15px;
    }

    label {
        display: block;
        margin-bottom: 5px;
        font-weight: 600;
        color: var(--text-dark);
        font-size: 0.95rem;
    }
    
    .input-group {
        display: flex;
        gap: 10px;
    }
    
    .input-group input, .input-group select {
        flex-grow: 1;
        width: auto !important;
    }

    input[type="text"],
    input[type="number"],
    select,
    textarea {
        width: 100%;
        padding: 12px;
        border: 1px solid var(--border-color);
        border-radius: 8px;
        background-color: var(--input-bg);
        color: var(--text-dark);
        transition: border-color 0.3s, background-color 0.3s, box-shadow 0.3s;
        font-size: 1rem;
    }

    input:focus,
    select:focus,
    textarea:focus {
        border-color: var(--primary-color);
        box-shadow: 0 0 0 3px rgba(90, 125, 255, 0.2);
        outline: none;
        background-color: var(--card-bg);
    }

    .btn {
        padding: 10px 20px;
        border-radius: 8px;
        cursor: pointer;
        font-weight: 600;
        transition: all 0.2s ease-in-out;
        border: none;
        font-size: 1rem;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 8px;
    }

    .btn-primary {
        background-color: var(--primary-color);
        color: white;
    }

    .btn-primary:hover {
        background-color: var(--primary-dark);
    }

    .btn-secondary {
        background-color: var(--bg-medium);
        color: var(--text-dark);
        border: 1px solid var(--border-color);
    }

    .btn-secondary:hover {
        background-color: var(--bg-dark);
    }
    
    .btn-secondary.active {
        background-color: var(--primary-color);
        color: white;
        border-color: var(--primary-color);
    }

    .action-buttons {
        display: flex;
        gap: 10px;
        margin-top: 20px;
    }
    
    /* --- FILTER & SÖK --- */
    .filter-section {
        background-color: var(--card-bg);
        padding: 20px;
        border-radius: 12px;
        box-shadow: var(--card-shadow);
        margin-bottom: 30px;
        border: 1px solid var(--border-color);
    }

    .filter-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 15px;
    }

    .search-filter-controls {
        display: flex;
        gap: 15px;
        align-items: center;
        flex-wrap: wrap;
    }

    #search-input {
        flex-grow: 1;
        min-width: 200px;
    }
    
    /* --- LISTVY --- */
    .inventory-list {
        background-color: var(--card-bg);
        border-radius: 12px;
        box-shadow: var(--card-shadow);
        overflow: hidden;
        margin-top: 20px;
        border: 1px solid var(--border-color);
    }
    
    .collapsible-header {
        padding: 15px 20px;
        background-color: var(--bg-medium);
        border-bottom: 1px solid var(--border-color);
        cursor: pointer;
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-weight: 700;
        font-size: 1.1rem;
        transition: background-color 0.3s;
        user-select: none;
    }

    .dark-mode .collapsible-header {
        background-color: #2a374a;
    }

    .collapsible-header:hover {
        background-color: var(--bg-dark);
    }

    .collapsible-header[data-state="closed"] .arrow {
        transform: rotate(-90deg);
    }

    .arrow {
        font-size: 1.5rem;
        line-height: 1;
        transition: transform 0.3s;
        margin-left: 10px;
    }

    .table-wrapper {
        max-height: 100vh; /* Initial state, will be managed by JS for collapsing */
        overflow: hidden;
        transition: max-height 0.5s ease-out;
    }
    
    .table-wrapper.collapsed {
        max-height: 0;
        padding-top: 0;
        padding-bottom: 0;
        border-bottom: none !important;
    }

    table {
        width: 100%;
        border-collapse: collapse;
        font-size: 0.95rem;
    }

    th {
        background-color: var(--bg-light);
        color: var(--text-light);
        padding: 12px 15px;
        text-align: left;
        font-weight: 600;
        border-bottom: 2px solid var(--border-color);
        cursor: pointer;
        user-select: none;
        white-space: nowrap;
        transition: background-color 0.3s;
    }
    
    .dark-mode th {
        background-color: #2a374a;
    }

    th:hover {
        background-color: var(--bg-medium);
    }
    
    th.sorted-asc, th.sorted-desc {
        color: var(--primary-color);
    }
    
    th.sorted-asc::after { content: ' \u25B2'; } /* Uppåtriktad triangel */
    th.sorted-desc::after { content: ' \u25BC'; } /* Nedåtriktad triangel */

    td {
        padding: 12px 15px;
        border-bottom: 1px solid var(--border-color);
        vertical-align: middle;
    }

    tr:hover {
        background-color: var(--bg-medium);
    }

    tr:last-child td {
        border-bottom: none;
    }

    .status-in-stock { color: var(--success-color); font-weight: 600; }
    .status-low-stock { color: var(--warning-color); font-weight: 600; }
    .status-out-of-stock { color: var(--danger-color); font-weight: 600; }
    
    /* Justering för kolumner */
    .count-cell, .price-cell { text-align: right; white-space: nowrap; }
    .notes-cell { max-width: 250px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; cursor: help; }
    .actions-cell { text-align: center; width: 1%; white-space: nowrap; }
    
    .actions-cell button {
        background: none;
        border: none;
        color: var(--primary-color);
        cursor: pointer;
        padding: 5px 8px;
        margin: 0 2px;
        border-radius: 4px;
        transition: background-color 0.2s;
    }
    
    .actions-cell button:hover {
        background-color: var(--bg-medium);
    }
    
    .actions-cell button.delete-btn {
        color: var(--danger-color);
    }
    
    .actions-cell button.delete-btn:hover {
        background-color: var(--danger-color);
        color: white;
    }
    
    /* --- VERKTYG & ÖVRIGT --- */
    .tools-bar {
        display: flex;
        justify-content: flex-end;
        align-items: center;
        gap: 15px;
        padding-bottom: 20px;
        border-bottom: 1px solid var(--border-color);
        margin-bottom: 20px;
    }

    .tools-bar button {
        padding: 8px 15px;
        font-size: 0.9rem;
    }

    #sync-status {
        font-size: 0.9rem;
        padding: 5px 10px;
        border-radius: 6px;
        font-weight: 500;
        transition: background-color 0.3s, color 0.3s;
    }

    .sync-connecting { background-color: var(--info-color); color: white; }
    .sync-ok { background-color: var(--success-color); color: white; }
    .sync-error { background-color: var(--danger-color); color: white; }
    .sync-busy { background-color: var(--warning-color); color: var(--text-dark); }
    
    #search-history-container {
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
        margin-top: 15px;
    }
    
    .history-tag {
        background-color: var(--bg-medium);
        padding: 5px 10px;
        border-radius: 15px;
        font-size: 0.85rem;
        cursor: pointer;
        transition: background-color 0.2s;
        color: var(--text-dark);
        border: 1px solid var(--border-color);
    }
    
    .history-tag:hover {
        background-color: var(--bg-dark);
    }
    
    /* --- MODAL STYLING (Gäller alla modals: Add, Edit, Confirm) --- */
    .modal {
        display: none; /* Dölj som standard */
        position: fixed;
        z-index: 1000;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        overflow: auto;
        background-color: rgba(0,0,0,0.5); /* Svart med transparens */
        backdrop-filter: blur(5px);
        padding-top: 60px;
    }

    .modal-content {
        background-color: var(--card-bg);
        margin: 5% auto; /* 5% uppifrån och centrerad */
        padding: 30px;
        border-radius: 12px;
        box-shadow: var(--card-shadow);
        width: 90%;
        max-width: 600px; /* Maxbredd för formuläret/bekräftelsen */
        position: relative;
        transform: translateY(-50px);
        opacity: 0;
        transition: transform 0.3s ease-out, opacity 0.3s ease-out;
    }
    
    .modal.active .modal-content {
        transform: translateY(0);
        opacity: 1;
    }

    .close-btn {
        color: var(--text-light);
        float: right;
        font-size: 28px;
        font-weight: bold;
        position: absolute;
        top: 15px;
        right: 20px;
        cursor: pointer;
        transition: color 0.2s;
    }

    .close-btn:hover,
    .close-btn:focus {
        color: var(--danger-color);
        text-decoration: none;
    }
    
    .modal h3 {
        color: var(--text-dark);
        margin-bottom: 20px;
        font-size: 1.5rem;
        font-weight: 700;
    }
    
    /* Stilar för den globala sökfunktionen */
    #global-search-container {
        position: relative;
        width: 100%;
        max-width: 400px;
    }
    
    #global-search-results {
        position: absolute;
        top: 100%;
        left: 0;
        right: 0;
        background-color: var(--card-bg);
        border: 1px solid var(--border-color);
        border-top: none;
        border-radius: 0 0 8px 8px;
        box-shadow: var(--card-shadow);
        z-index: 50;
        max-height: 300px;
        overflow-y: auto;
    }
    
    .search-result-item {
        padding: 10px 15px;
        cursor: pointer;
        border-bottom: 1px solid var(--bg-medium);
        transition: background-color 0.2s;
        font-size: 0.9rem;
    }
    
    .search-result-item:last-child {
        border-bottom: none;
    }
    
    .search-result-item:hover {
        background-color: var(--bg-medium);
    }
    
    .result-part-number {
        font-weight: 600;
        color: var(--primary-color);
        margin-right: 10px;
    }
    
    .result-description {
        color: var(--text-dark);
    }
    
    /* --- PWA & Tema --- */
    .theme-toggle-container {
        display: flex;
        align-items: center;
    }

    .theme-toggle {
        width: 50px;
        height: 25px;
        background-color: var(--bg-dark);
        border-radius: 15px;
        position: relative;
        cursor: pointer;
        transition: background-color 0.3s;
    }

    .theme-toggle-ball {
        width: 20px;
        height: 20px;
        background-color: var(--card-bg);
        border-radius: 50%;
        position: absolute;
        top: 2.5px;
        left: 2.5px;
        transition: transform 0.3s, background-color 0.3s;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }

    .dark-mode .theme-toggle-ball {
        transform: translateX(25px);
    }
    
    #install-button {
        display: none;
        margin-left: 15px;
        font-size: 0.9rem;
    }
    
    /* Flytande åtgärdsknapp (FAB) */
    #fab-add-btn {
        position: fixed;
        bottom: 20px;
        right: 20px;
        width: 60px;
        height: 60px;
        border-radius: 50%;
        background-color: var(--primary-color);
        color: white;
        font-size: 30px;
        line-height: 1;
        border: none;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.25);
        cursor: pointer;
        transition: background-color 0.2s, transform 0.2s;
        z-index: 900;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    #fab-add-btn:hover {
        background-color: var(--primary-dark);
        transform: scale(1.05);
    }
    
    #back-to-top-btn {
        position: fixed;
        bottom: 90px; /* Ovanför FAB */
        right: 20px;
        width: 45px;
        height: 45px;
        border-radius: 50%;
        background-color: var(--bg-dark);
        color: var(--text-dark);
        border: 1px solid var(--border-color);
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        cursor: pointer;
        display: none;
        transition: opacity 0.3s, background-color 0.3s;
        z-index: 899;
    }
    
    #back-to-top-btn:hover {
        opacity: 0.8;
    }
    
    #back-to-top-btn svg {
        width: 24px;
        height: 24px;
        fill: currentColor;
    }
    
    /* LADDNINGSSKÄRM */
    #initial-loader {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: var(--bg-light);
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        z-index: 2000;
        transition: opacity 0.5s ease;
    }
    
    .loader {
        border: 5px solid var(--border-color);
        border-top: 5px solid var(--primary-color);
        border-radius: 50%;
        width: 50px;
        height: 50px;
        animation: spin 1s linear infinite;
        margin-bottom: 20px;
    }
    
    @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
    }
    
    #initial-loader p {
        font-size: 1.2rem;
        color: var(--text-dark);
    }
    
    /* Övrigt */
    .center-text { text-align: center; color: var(--text-light); padding: 30px; }
    .orange-asterisk { color: var(--orange-asterisk); margin-left: 2px; }
    
    /* Anpassningar för mobil */
    @media (max-width: 768px) {
        main {
            padding: 10px;
        }

        h1 {
            font-size: 2rem;
        }

        .search-filter-controls {
            flex-direction: column;
            gap: 10px;
        }

        #search-input, #global-search-input {
            width: 100%;
        }

        .tools-bar {
            flex-direction: column;
            align-items: stretch;
        }
        
        .tools-bar button, .tools-bar > div {
            width: 100%;
        }

        .inventory-list {
            overflow-x: auto;
        }

        table {
            min-width: 800px;
        }
        
        td, th {
            font-size: 0.9rem;
            padding: 10px;
        }
        
        .notes-cell {
            max-width: 150px;
        }
    }
    </style>
    <link rel="manifest" href="./manifest.json">
</head>
<body>
    
    <div id="initial-loader">
        <div class="loader"></div>
        <p>Laddar lagerdata...</p>
    </div>

    <main>
        
        <div class="tools-bar">
             <div id="global-search-container">
                <input type="text" id="global-search-input" placeholder="Sök artikelnummer eller beskrivning globalt..." title="Sök i alla synliga fält">
                <div id="global-search-results"></div>
            </div>
            <button id="install-button" class="btn-secondary">Installera App</button>
            <div id="sync-status" class="sync-connecting">Ansluter...</div>
            <div class="theme-toggle-container">
                <span style="font-size: 0.9rem; margin-right: 10px;">Mörkt läge</span>
                <div id="theme-toggle" class="theme-toggle">
                    <div class="theme-toggle-ball"></div>
                </div>
            </div>
        </div>

        <h1>Lager och Prisjämförelse</h1>
        
        <div class="stats-container">
            <div class="stat-card">
                <h4>Totalt Värde (Inköp)</h4>
                <p id="total-value-stat" class="stat-total">0.00 kr</p>
            </div>
            <div class="stat-card">
                <h4>Artiklar i Lager</h4>
                <p id="total-items-stat" class="stat-low">0 st</p>
            </div>
            <div class="stat-card">
                <h4>Artiklar Slut (Min. nivå 0)</h4>
                <p id="out-of-stock-stat" class="stat-out">0 st</p>
            </div>
            <div class="stat-card">
                <h4>Artiklar med Låg Nivå</h4>
                <p id="low-stock-stat" class="stat-low">0 st</p>
            </div>
        </div>
        <div class="filter-section">
            <div class="filter-header">
                <h2>Lageröversikt</h2>
            </div>
            <div class="search-filter-controls">
                <input type="text" id="search-input" placeholder="Filtrera i listan..." title="Filtrera den valda listan">
                
                <div id="category-filter" class="action-buttons" style="margin-top: 0;">
                    <button class="btn-secondary active" data-category="Alla">Alla</button>
                    <button class="btn-secondary" data-category="Service">Service</button>
                    <button class="btn-secondary" data-category="Motor/Chassi">Motor/Chassi</button>
                    <button class="btn-secondary" data-category="Verktyg">Verktyg</button>
                </div>
                
                <button id="clear-filters-btn" class="btn-secondary">Rensa Filter</button>
            </div>
            <div id="search-history-container">
                </div>
        </div>
        
        <div class="inventory-list">
            
            <div id="inventory-titel" class="collapsible-header" data-state="open">
                Artiklar i Lager <span id="inventory-count" class="count-badge"></span>
                <span class="arrow">&#9660;</span>
            </div>
            <div id="inventory-wrapper" class="table-wrapper">
                <table id="inventory-table">
                    <thead>
                        <tr>
                            <th data-sort-by="partNumber">Artikelnummer</th>
                            <th data-sort-by="description">Beskrivning</th>
                            <th data-sort-by="category">Kategori</th>
                            <th data-sort-by="count" class="count-cell">Antal</th>
                            <th data-sort-by="minStock">Min. antal</th>
                            <th data-sort-by="price" class="price-cell">Inköpspris (st)</th>
                            <th data-sort-by="totalValue" class="price-cell">Totalt värde</th>
                            <th data-sort-by="notes" class="notes-cell">Anteckningar</th>
                            <th data-sort-by="link">Länk</th>
                            <th>Jämför pris</th>
                            <th>Åtgärder</th>
                        </tr>
                    </thead>
                    <tbody id="inventory-list">
                        </tbody>
                </table>
                <p id="inventory-empty-message" class="center-text" style="display:none;">Inga artiklar hittades med nuvarande filter.</p>
            </div>
            
            <div id="wishlist-titel" class="collapsible-header" data-state="closed">
                Önskelista <span id="wishlist-count" class="count-badge"></span>
                <span class="arrow">&#9660;</span>
            </div>
            <div id="wishlist-wrapper" class="table-wrapper collapsed">
                <table id="wishlist-table">
                     <thead>
                        <tr>
                            <th data-sort-by="partNumber">Artikelnummer</th>
                            <th data-sort-by="description">Beskrivning</th>
                            <th data-sort-by="category">Kategori</th>
                            <th data-sort-by="notes" class="notes-cell">Anteckningar</th>
                            <th data-sort-by="link">Länk</th>
                            <th>Jämför pris</th>
                            <th>Åtgärder</th>
                        </tr>
                    </thead>
                    <tbody id="wishlist-list">
                        </tbody>
                </table>
                <p id="wishlist-empty-message" class="center-text" style="display:none;">Önskelistan är tom.</p>
            </div>
        </div>
        
        <div class="action-buttons" style="margin-top: 30px; justify-content: center;">
            <button id="export-btn" class="btn-secondary">Exportera Lagerdata (JSON)</button>
            <button id="import-btn" class="btn-primary">Importera Lagerdata (JSON)</button>
            <input type="file" id="import-file-input" accept=".json" style="display: none;">
        </div>

    </main>

    <div id="addArticleModal" class="modal">
        <div class="modal-content">
            <span class="close-btn" id="close-add-modal">&times;</span>
            <h3>Lägg till Ny Artikel</h3>
            <form id="add-item-form">
                
                <div class="form-group">
                    <label for="new-partNumber">Artikelnummer <span class="orange-asterisk">*</span></label>
                    <input type="text" id="new-partNumber" required>
                </div>

                <div class="form-group">
                    <label for="new-description">Beskrivning <span class="orange-asterisk">*</span></label>
                    <textarea id="new-description" required rows="2"></textarea>
                </div>
                
                <div class="form-group">
                    <label for="new-category">Kategori <span class="orange-asterisk">*</span></label>
                    <select id="new-category" required>
                        <option value="">Välj Kategori</option>
                        <option value="Service">Service</option>
                        <option value="Motor/Chassi">Motor/Chassi</option>
                        <option value="Verktyg">Verktyg</option>
                        <option value="Övrigt">Övrigt</option>
                    </select>
                </div>

                <div class="form-group input-group">
                    <div>
                        <label for="new-count">Antal i lager <span class="orange-asterisk">*</span></label>
                        <input type="number" id="new-count" value="0" min="0" required>
                    </div>
                    <div>
                        <label for="new-minStock">Min. antal (Låg nivå varning)</label>
                        <input type="number" id="new-minStock" value="1" min="0">
                    </div>
                    <div>
                        <label for="new-price">Inköpspris (st) <span class="orange-asterisk">*</span></label>
                        <input type="number" id="new-price" value="0.00" min="0" step="0.01" required>
                    </div>
                </div>

                <div class="form-group">
                    <label for="new-notes">Anteckningar (valfritt)</label>
                    <textarea id="new-notes" rows="3"></textarea>
                </div>
                
                <div class="form-group">
                    <label for="new-link">Produktlänk (valfritt)</label>
                    <input type="text" id="new-link" placeholder="T.ex. https://www.leverantör.se/artikel-123">
                </div>
                
                <div class="action-buttons">
                    <button type="submit" class="btn-primary" style="flex-grow: 1;">Lägg till Artikel</button>
                </div>
            </form>
        </div>
    </div>
    <div id="editArticleModal" class="modal">
        <div class="modal-content">
            <span class="close-btn" id="close-edit-modal">&times;</span>
            <h3>Redigera Artikel</h3>
            <form id="edit-item-form">
                <input type="hidden" id="edit-id">
                
                <div class="form-group">
                    <label for="edit-partNumber">Artikelnummer</label>
                    <input type="text" name="partNumber" id="edit-partNumber" required>
                </div>

                <div class="form-group">
                    <label for="edit-description">Beskrivning</label>
                    <textarea name="description" id="edit-description" required rows="2"></textarea>
                </div>

                <div class="form-group">
                    <label for="edit-category">Kategori</label>
                    <select name="category" id="edit-category" required>
                        <option value="Service">Service</option>
                        <option value="Motor/Chassi">Motor/Chassi</option>
                        <option value="Verktyg">Verktyg</option>
                        <option value="Övrigt">Övrigt</option>
                        <option value="Önskelista">Önskelista</option>
                    </select>
                </div>

                <div class="form-group input-group">
                    <div>
                        <label for="edit-count">Antal i lager</label>
                        <input type="number" name="count" id="edit-count" min="0">
                    </div>
                    <div>
                        <label for="edit-minStock">Min. antal</label>
                        <input type="number" name="minStock" id="edit-minStock" min="0">
                    </div>
                    <div>
                        <label for="edit-price">Inköpspris (st)</label>
                        <input type="number" name="price" id="edit-price" min="0" step="0.01">
                    </div>
                </div>

                <div class="form-group">
                    <label for="edit-notes">Anteckningar</label>
                    <textarea name="notes" id="edit-notes" rows="3"></textarea>
                </div>
                
                <div class="form-group">
                    <label for="edit-link">Produktlänk</label>
                    <input type="text" name="link" id="edit-link">
                </div>
                
                <button type="submit" class="btn-primary">Spara Ändringar</button>
            </form>
        </div>
    </div>

    <div id="confirmationModal" class="modal">
        <div class="modal-content">
            <h3 id="confirmationTitle">Bekräfta</h3>
            <p id="confirmationMessage" style="margin-top: 20px; margin-bottom: 30px; font-size: 1.1em;"></p>
            <div class="action-buttons" style="justify-content: flex-end; gap: 15px;">
                <button id="confirmNo" class="btn-secondary">Avbryt</button>
                <button id="confirmYes" class="btn-primary">Ja</button> </div>
        </div>
    </div>

    <div id="productPopup">
        <span class="close-btn">&times;</span>
        <iframe id="productIframe" src="" frameborder="0"></iframe>
    </div>
        
    <button id="fab-add-btn" title="Lägg till ny artikel">
        +
    </button>
    
    <button id="back-to-top-btn" title="Tillbaka till toppen" style="display: none;">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd" d="M10 18a.75.75 0 0 1-.75-.75V4.66L5.53 8.47a.75.75 0 0 1-1.06-1.06l5.25-5.25a.75.75 0 0 1 1.06 0l5.25 5.25a.75.75 0 1 1-1.06 1.06L10.75 4.66v12.59a.75.75 0 0 1-.75.75Z" clip-rule="evenodd" />
        </svg>
    </button>
    
    <script type="module" src="./apps.js"></script>
</body>
</html>
